<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Australia on Fire • AirSensor</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../../apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/lumen/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/all.min.css" integrity="sha256-nAmazAk6vS34Xqo0BSrTb+abbtFlgsFK7NKSi6o7Y78=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/v4-shims.min.css" integrity="sha256-6qHlizsOWFskGlwVOKuns+D1nB6ssZrHQrNj1wGplHc=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/headroom.min.js" integrity="sha256-DJFC1kqIhelURkuza0AvYal5RxMtpzLjFhsnVIeuk+U=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../../pkgdown.css" rel="stylesheet">
<script src="../../pkgdown.js"></script><meta property="og:title" content="Australia on Fire">
<meta property="og:description" content="">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-inverse navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../../index.html">AirSensor</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.7.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../../articles/AirSensor_Function_Overview.html">AirSensor Function Overview</a>
    </li>
    <li>
      <a href="../../articles/Developer_Style_Guide.html">Developer Style Guide</a>
    </li>
    <li>
      <a href="../../articles/articles/Australia_on_fire.html">Australia on Fire</a>
    </li>
    <li>
      <a href="../../articles/articles/DataFlowChart.html">Processing PurpleAir Data</a>
    </li>
    <li>
      <a href="../../articles/articles/SoH_functions.html">SoH Functions</a>
    </li>
    <li>
      <a href="../../articles/articles/outlier_detection.html">Outlier Detection with the Hampel Filter</a>
    </li>
    <li>
      <a href="../../articles/articles/pas_introduction.html">PurpleAir Synoptic Data</a>
    </li>
    <li>
      <a href="../../articles/articles/pat_introduction.html">PurpleAir TimeSeries Data</a>
    </li>
    <li>
      <a href="../../articles/articles/purpleair_failure_modes.html">PurpleAir Failure Modes</a>
    </li>
    <li>
      <a href="../../articles/articles/purpleair_qc.html">Purple Air Quality Control</a>
    </li>
    <li>
      <a href="../../articles/articles/purpleair_sensors.html">Purple Air Sensors</a>
    </li>
    <li>
      <a href="../../articles/articles/working_with_wind_data.html">Working With Wind Data</a>
    </li>
  </ul>
</li>
<li>
  <a href="../../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/MazamaScience/AirSensor">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="Australia_on_fire_files/htmlwidgets-1.5.1/htmlwidgets.js"></script><script src="Australia_on_fire_files/jquery-1.12.4/jquery.min.js"></script><link href="Australia_on_fire_files/leaflet-1.3.1/leaflet.css" rel="stylesheet">
<script src="Australia_on_fire_files/leaflet-1.3.1/leaflet.js"></script><link href="Australia_on_fire_files/leafletfix-1.0.0/leafletfix.css" rel="stylesheet">
<script src="Australia_on_fire_files/Proj4Leaflet-1.0.1/proj4-compressed.js"></script><script src="Australia_on_fire_files/Proj4Leaflet-1.0.1/proj4leaflet.js"></script><link href="Australia_on_fire_files/rstudio_leaflet-1.3.1/rstudio_leaflet.css" rel="stylesheet">
<script src="Australia_on_fire_files/leaflet-binding-2.0.3/leaflet.js"></script><script src="Australia_on_fire_files/leaflet-providers-1.9.0/leaflet-providers_1.9.0.js"></script><script src="Australia_on_fire_files/leaflet-providers-plugin-2.0.3/leaflet-providers-plugin.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1>Australia on Fire</h1>
                        <h4 class="author">Kayleigh Wilson &amp; Jonathan Callahan</h4>
            
            <h4 class="date">2020-01-15</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/MazamaScience/AirSensor/blob/master/vignettes/articles/Australia_on_fire.Rmd"><code>vignettes/articles/Australia_on_fire.Rmd</code></a></small>
      <div class="hidden name"><code>Australia_on_fire.Rmd</code></div>

    </div>

    
    
<div id="goals" class="section level2">
<h2 class="hasAnchor">
<a href="#goals" class="anchor"></a>Goals</h2>
<p>The goal of this report is to demonstrate the use of the <strong>AirSensor</strong> package to explore the smoke impacts of the December 2019 - January 2020 fires and smoke in Australia. This document demonstrates “reproducible research” in that no pre-generated files are needed. Raw data from PurpleAir will be downloaded and processed when this script is first run.</p>
<p>We begin by loading the necessary packages:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" data-line-number="1"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(dplyr)            <span class="co"># data manipulation</span></a>
<a class="sourceLine" id="cb1-2" data-line-number="2"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(ggplot2)          <span class="co"># plotting</span></a>
<a class="sourceLine" id="cb1-3" data-line-number="3"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(PWFSLSmoke)       <span class="co"># USFS monitor data access and plotting</span></a>
<a class="sourceLine" id="cb1-4" data-line-number="4"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(AirSensor)        <span class="co"># PurpleAir sensor data access and plotting</span></a>
<a class="sourceLine" id="cb1-5" data-line-number="5"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(AirMonitorPlots)  <span class="co"># Advanced plots for monitors</span></a></code></pre></div>
<p>In this document we will use the term “sensor” to refer to consumer-grade, PurpleAir air quality sensors sampling at a high time resolution. The term “monitor” will refer to professional-grade, typically government managed monitors with hourly data.</p>
<p>The <strong>AirSensor</strong> package has three data models:</p>
<ul>
<li>
<em>pas</em> (<strong>P</strong>urple<strong>A</strong>ir <strong>S</strong>ynoptic) objects contain snapshots of multiple PA sensors and can be used to make maps</li>
<li>
<em>pat</em> (<strong>P</strong>urple<strong>A</strong>ir <strong>T</strong>imeseries) objects contain high resolution data for a single sensor</li>
<li>
<em>airsensor</em> objects contain PA timeseries data that has been quality controlled and aggregated to an hourly time axis.</li>
</ul>
</div>
<div id="getting-the-data" class="section level2">
<h2 class="hasAnchor">
<a href="#getting-the-data" class="anchor"></a>Getting the Data</h2>
<div id="set-up-a-local-archive" class="section level3">
<h3 class="hasAnchor">
<a href="#set-up-a-local-archive" class="anchor"></a>Set up a local archive</h3>
<p>The <strong>AirSensor</strong> package needs to know where processed data will live. For this report, we will specify a local <code>archiveBaseDir</code> where downloaded and processed data will live. The following code specifies a local directory archive, checks for its existence and creates it if needed.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" data-line-number="1">archiveBaseDir &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/path.expand.html">path.expand</a></span>(<span class="st">"~/Data/Australia_on_fire"</span>)</a>
<a class="sourceLine" id="cb2-2" data-line-number="2"><span class="cf">if</span> ( <span class="op">!</span><span class="kw"><a href="https://rdrr.io/r/base/files2.html">dir.exists</a></span>(archiveBaseDir) ) {</a>
<a class="sourceLine" id="cb2-3" data-line-number="3">  <span class="kw"><a href="https://rdrr.io/r/base/files2.html">dir.create</a></span>(archiveBaseDir)</a>
<a class="sourceLine" id="cb2-4" data-line-number="4">}</a>
<a class="sourceLine" id="cb2-5" data-line-number="5"></a>
<a class="sourceLine" id="cb2-6" data-line-number="6"><span class="kw"><a href="../../reference/setArchiveBaseDir.html">setArchiveBaseDir</a></span>(archiveBaseDir)</a></code></pre></div>
</div>
<div id="load-synoptic-data-for-australia" class="section level3">
<h3 class="hasAnchor">
<a href="#load-synoptic-data-for-australia" class="anchor"></a>Load synoptic data for Australia</h3>
<p>We will use the <code><a href="../../reference/pas_createNew.html">pas_createNew()</a></code> function to create a <em>pas</em> object containing all the spatial metadata associated with purple air monitors in Australia.</p>
<p>The following code checks to make sure the <code>pas_au</code> file exists in your <code>archiveBaseDir</code> directory and, if missing, recreates it.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" data-line-number="1">filePath_pas &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/file.path.html">file.path</a></span>(archiveBaseDir, <span class="st">"pas_au.rda"</span>)</a>
<a class="sourceLine" id="cb3-2" data-line-number="2"></a>
<a class="sourceLine" id="cb3-3" data-line-number="3"><span class="cf">if</span> ( <span class="op">!</span><span class="kw"><a href="https://rdrr.io/r/base/files.html">file.exists</a></span>(filePath_pas) ) {</a>
<a class="sourceLine" id="cb3-4" data-line-number="4">  <span class="kw"><a href="../../reference/initializeMazamaSpatialUtils.html">initializeMazamaSpatialUtils</a></span>()</a>
<a class="sourceLine" id="cb3-5" data-line-number="5">  pas_au &lt;-<span class="st"> </span><span class="kw"><a href="../../reference/pas_createNew.html">pas_createNew</a></span>(<span class="dt">countryCodes =</span> <span class="st">"AU"</span>, <span class="dt">includePWFSL =</span> <span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb3-6" data-line-number="6">  <span class="kw"><a href="https://rdrr.io/r/base/save.html">save</a></span>(pas_au, <span class="dt">file =</span> filePath_pas)</a>
<a class="sourceLine" id="cb3-7" data-line-number="7">}</a>
<a class="sourceLine" id="cb3-8" data-line-number="8"></a>
<a class="sourceLine" id="cb3-9" data-line-number="9">pas &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/get.html">get</a></span>(<span class="kw"><a href="https://rdrr.io/r/base/load.html">load</a></span>(filePath_pas))</a></code></pre></div>
</div>
<div id="view-a-pas-map" class="section level3">
<h3 class="hasAnchor">
<a href="#view-a-pas-map" class="anchor"></a>View a <em>pas</em> map</h3>
<p>A <em>pas</em> object is a dataframe that contains metadata and PM 2.5 averages for many purple air sensors in a designated region. Each pas object can be filtered and edited to retain whichever collection of sensors the analyist desires based on location, state, name, <em>etc.</em></p>
<p>It is important to note that the data averages in the <em>pas</em> object – the numeric values for PM2.5 or temperature or humidity – are current at the time that the pas is created. <em>pas</em> objects can be used to quickly explore the spatial distribution of PurpleAir sensors and display some <em>then</em>-current values but should not be used for detailed analysis.</p>
<p>We can view the locations of each sensor and the AQI (Air Quality Index) maxima (when the <em>pas</em> was created) using the <code><a href="../../reference/pas_leaflet.html">pas_leaflet()</a></code> function.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb4-1" data-line-number="1"><span class="kw"><a href="../../reference/pas_leaflet.html">pas_leaflet</a></span>(pas)</a></code></pre></div>
<div id="htmlwidget-ba7bd171c0fd124cf06d" style="width:672px;height:480px;" class="leaflet html-widget"></div>
<script type="application/json" data-for="htmlwidget-ba7bd171c0fd124cf06d">{"x":{"options":{"crs":{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,"options":{}}},"setView":[[-31.5664,134.63547],4,[]],"calls":[{"method":"addProviderTiles","args":["Esri.WorldTopoMap",null,null,{"errorTileUrl":"","noWrap":false,"detectRetina":false}]},{"method":"addCircleMarkers","args":[[-30.521222,-30.508542,-30.528911,-30.508505,-30.515002,-30.496605,-30.516705,-33.860263,-33.748231,-37.839517,-41.429001,-31.77663,-35.245241,-37.900868,-35.426909,-32.373649,-33.666833,-27.1794,-37.801898,-35.244832,-31.26006,-27.438489,-37.762464,-28.818177,-33.847175,-20.07086,-34.047465,-34.047754,-37.73367,-34.092899,-33.411846,-33.967445,-34.020011,-42.969152,-33.55647,-35.912929,-33.832318,-20.698279,-33.738185,-33.785794,-33.933838,-32.925746,-28.623396,-23.85876,-37.906097,-30.334999,-27.460482,-34.805461,-33.415371,-32.971385,-30.5087,-33.274303,-35.10444,-43.06194,-27.701034,-33.703981,-27.499272,-31.755797,-33.678161,-37.894849,-37.866871,-34.529082,-27.567055],[151.666312,151.661741,151.645487,151.661677,151.659095,151.660597,151.657407,151.182855,151.253185,144.93464,148.272003,116.074529,149.448004,144.66433,149.120723,149.709531,151.312024,152.831866,145.193614,149.145887,149.220861,153.025108,144.989788,153.278796,151.210579,146.277829,151.079989,151.079893,142.014648,150.998719,151.43011,151.100832,151.060456,147.265196,151.266626,150.154739,151.245973,139.490978,151.092065,151.133002,150.617092,151.780825,153.219984,151.26664,145.053772,142.753166,152.98905,138.647766,149.56801,138.830877,151.662354,149.094293,147.3603,147.200764,152.910131,151.161934,153.003966,115.992144,151.285714,144.648308,144.890664,150.872469,153.097767],10,["ARC08","ARC1","ARC12","ARC2","Armidale_1","Armidale_2","Armidale_3","Balmain","Beacon Hill","BeaconCove_ParkSq","Beaumaris Weather Tasmania","Brigadoon Hills","Bungendore, NSW Australia","Central Werribee","Chisholm ACT Australia","Cooks Gap","Crescent Road Mona Vale NSW Australia","Dayboro","Donvale (Eastlink Entrance Eastbound)","Downer","EPSO","FKG Deck","Gadd Street Air Quality","Girards Hill","Glen Street, Milson’s Point, NSW, Australia","Goldtower Charters Towers","Gymea Bay","Gymea Bay Weather","Hamilton ","Heathcote","Home","Hurstville","Jannali","Kingston","Lot 331 Station","MORUYA HEADS","Mosman","Mount Isa","MQ_Con2","mySmart","mySmart Farm - Silverdale 1","Newcastle City","Nimbin Rocks - Coffee Camp","Oaka Hill","Ormond","PA5","Paddo Deck","Para Hills West","Peel Street Bathurst","Peterborough","PIE Armidale","PIE Orange","PIE Wagga","Snug Tiers","Springfield Lakes","St Ives Chase","St Lucia - 6th Ave","The Vines, Perth","Warriewood, NSW, AU","Werribbee Street North Park","Williamstown Beach","Windang, Ocean Street","Wishart Outlook"],null,{"interactive":true,"className":"","stroke":false,"color":"#03F","weight":5,"opacity":0.5,"fill":true,"fillColor":["#00E400","#00E400","#00E400","#00E400","#00E400","#00E400","#00E400","#FF7E00","#FF7E00","#00E400","#00E400","#00E400","#8F3F97","#00E400","#FFFF00","#FFFF00","#FFFF00","#FFFF00","#00E400","#FF0000","#FF7E00","#FFFF00","#00E400","#FFFF00","#FFFF00","#00E400","#FF0000","#FF0000","#00E400","#FF0000","#FFFF00","#FF0000","#FF0000","#00E400","#FFFF00","#8F3F97","#FFFF00","#00E400","#FF7E00","#00E400","#FF7E00","#FFFF00","#FFFF00","#FFFF00","#00E400","#FF0000","#00E400","#00E400","#FF7E00","#00E400","#00E400","#FF7E00","#00E400","#00E400","#00E400","#FF7E00","#00E400","#00E400","#FFFF00","#00E400","#00E400","#8F3F97","#00E400"],"fillOpacity":0.8},null,null,["<b>ARC08<\/b><br/><b>deviceDeploymentID = 183c8dab33e57fa3_10414<\/b><br/><b>pm25_1hr = 0 µg/m3<\/b><br/>temperature = 66 F<br/>humidity = 70%<br/>pm25_1hr = 0 µg/m3<br/>pm25_1day = 0 µg/m3<br/>location_type = outside<br/>","<b>ARC1<\/b><br/><b>deviceDeploymentID = b41530df7f50f866_10452<\/b><br/><b>pm25_1hr = 3.1 µg/m3<\/b><br/>temperature = 70 F<br/>humidity = 28%<br/>pm25_1hr = 3.1 µg/m3<br/>pm25_1day = 20.6 µg/m3<br/>location_type = outside<br/>","<b>ARC12<\/b><br/><b>deviceDeploymentID = 173d1a279ffa8abd_10464<\/b><br/><b>pm25_1hr = 0 µg/m3<\/b><br/>temperature = 67 F<br/>humidity = 67%<br/>pm25_1hr = 0 µg/m3<br/>pm25_1day = 0 µg/m3<br/>location_type = outside<br/>","<b>ARC2<\/b><br/><b>deviceDeploymentID = f5af286362b3f4dc_10476<\/b><br/><b>pm25_1hr = 4 µg/m3<\/b><br/>temperature = NA F<br/>humidity = NA%<br/>pm25_1hr = 4 µg/m3<br/>pm25_1day = 21.3 µg/m3<br/>location_type = outside<br/>","<b>Armidale_1<\/b><br/><b>deviceDeploymentID = 8115e2c196bc9168_1732<\/b><br/><b>pm25_1hr = 4.3 µg/m3<\/b><br/>temperature = 66 F<br/>humidity = 69%<br/>pm25_1hr = 4.3 µg/m3<br/>pm25_1day = 22.9 µg/m3<br/>location_type = outside<br/>","<b>Armidale_2<\/b><br/><b>deviceDeploymentID = b071c1abc0fdc2b9_1738<\/b><br/><b>pm25_1hr = 5.8 µg/m3<\/b><br/>temperature = 70 F<br/>humidity = 63%<br/>pm25_1hr = 5.8 µg/m3<br/>pm25_1day = 22.1 µg/m3<br/>location_type = outside<br/>","<b>Armidale_3<\/b><br/><b>deviceDeploymentID = 983b5ff10a093cd4_1720<\/b><br/><b>pm25_1hr = 3 µg/m3<\/b><br/>temperature = 74 F<br/>humidity = 56%<br/>pm25_1hr = 3 µg/m3<br/>pm25_1day = 19.2 µg/m3<br/>location_type = outside<br/>","<b>Balmain<\/b><br/><b>deviceDeploymentID = 6dd10047a7f5463a_16831<\/b><br/><b>pm25_1hr = 39.3 µg/m3<\/b><br/>temperature = 78 F<br/>humidity = 91%<br/>pm25_1hr = 39.3 µg/m3<br/>pm25_1day = 37.7 µg/m3<br/>location_type = outside<br/>","<b>Beacon Hill<\/b><br/><b>deviceDeploymentID = 7117cb835e41775b_44165<\/b><br/><b>pm25_1hr = 35.9 µg/m3<\/b><br/>temperature = 74 F<br/>humidity = 49%<br/>pm25_1hr = 35.9 µg/m3<br/>pm25_1day = 34 µg/m3<br/>location_type = outside<br/>","<b>BeaconCove_ParkSq<\/b><br/><b>deviceDeploymentID = ea4ff6921083f41f_24601<\/b><br/><b>pm25_1hr = 0.4 µg/m3<\/b><br/>temperature = 69 F<br/>humidity = 49%<br/>pm25_1hr = 0.4 µg/m3<br/>pm25_1day = 14.6 µg/m3<br/>location_type = outside<br/>","<b>Beaumaris Weather Tasmania<\/b><br/><b>deviceDeploymentID = 2736d1fd55584e5e_38959<\/b><br/><b>pm25_1hr = 8.3 µg/m3<\/b><br/>temperature = 68 F<br/>humidity = 31%<br/>pm25_1hr = 8.3 µg/m3<br/>pm25_1day = 10.2 µg/m3<br/>location_type = outside<br/>","<b>Brigadoon Hills<\/b><br/><b>deviceDeploymentID = 7f54f6d3aef59ccc_2669<\/b><br/><b>pm25_1hr = 0.6 µg/m3<\/b><br/>temperature = 83 F<br/>humidity = 33%<br/>pm25_1hr = 0.6 µg/m3<br/>pm25_1day = 3.5 µg/m3<br/>location_type = outside<br/>","<b>Bungendore, NSW Australia<\/b><br/><b>deviceDeploymentID = f4f4c6d16c637bf5_45307<\/b><br/><b>pm25_1hr = 164.7 µg/m3<\/b><br/>temperature = 67 F<br/>humidity = 59%<br/>pm25_1hr = 164.7 µg/m3<br/>pm25_1day = 91.2 µg/m3<br/>location_type = outside<br/>","<b>Central Werribee<\/b><br/><b>deviceDeploymentID = d95a79111aeb046c_13037<\/b><br/><b>pm25_1hr = 1.3 µg/m3<\/b><br/>temperature = 67 F<br/>humidity = 55%<br/>pm25_1hr = 1.3 µg/m3<br/>pm25_1day = 17.1 µg/m3<br/>location_type = outside<br/>","<b>Chisholm ACT Australia<\/b><br/><b>deviceDeploymentID = 27f2d8382be52aff_41449<\/b><br/><b>pm25_1hr = 20.9 µg/m3<\/b><br/>temperature = 66 F<br/>humidity = 37%<br/>pm25_1hr = 20.9 µg/m3<br/>pm25_1day = 78.9 µg/m3<br/>location_type = outside<br/>","<b>Cooks Gap<\/b><br/><b>deviceDeploymentID = 97eaea50cf4134e2_4579<\/b><br/><b>pm25_1hr = 33.3 µg/m3<\/b><br/>temperature = 66 F<br/>humidity = 55%<br/>pm25_1hr = 33.3 µg/m3<br/>pm25_1day = 29 µg/m3<br/>location_type = outside<br/>","<b>Crescent Road Mona Vale NSW Australia<\/b><br/><b>deviceDeploymentID = 1c1f9558bf1f6245_37283<\/b><br/><b>pm25_1hr = 30.1 µg/m3<\/b><br/>temperature = 75 F<br/>humidity = 50%<br/>pm25_1hr = 30.1 µg/m3<br/>pm25_1day = 24.7 µg/m3<br/>location_type = outside<br/>","<b>Dayboro<\/b><br/><b>deviceDeploymentID = edeb0aab5af2ce04_3843<\/b><br/><b>pm25_1hr = 13.1 µg/m3<\/b><br/>temperature = 79 F<br/>humidity = 100%<br/>pm25_1hr = 13.1 µg/m3<br/>pm25_1day = 21.1 µg/m3<br/>location_type = outside<br/>","<b>Donvale (Eastlink Entrance Eastbound)<\/b><br/><b>deviceDeploymentID = 4aa4cdd832493bec_2486<\/b><br/><b>pm25_1hr = 1.5 µg/m3<\/b><br/>temperature = 66 F<br/>humidity = 51%<br/>pm25_1hr = 1.5 µg/m3<br/>pm25_1day = 16.9 µg/m3<br/>location_type = outside<br/>","<b>Downer<\/b><br/><b>deviceDeploymentID = 75662802637d6d12_42085<\/b><br/><b>pm25_1hr = 67.5 µg/m3<\/b><br/>temperature = 65 F<br/>humidity = 58%<br/>pm25_1hr = 67.5 µg/m3<br/>pm25_1day = 84.8 µg/m3<br/>location_type = outside<br/>","<b>EPSO<\/b><br/><b>deviceDeploymentID = f80dba7a102cf15c_27579<\/b><br/><b>pm25_1hr = 40.9 µg/m3<\/b><br/>temperature = 65 F<br/>humidity = 68%<br/>pm25_1hr = 40.9 µg/m3<br/>pm25_1day = 23.1 µg/m3<br/>location_type = outside<br/>","<b>FKG Deck<\/b><br/><b>deviceDeploymentID = 8e4442684f212403_34417<\/b><br/><b>pm25_1hr = 14.1 µg/m3<\/b><br/>temperature = 86 F<br/>humidity = 58%<br/>pm25_1hr = 14.1 µg/m3<br/>pm25_1day = 15.8 µg/m3<br/>location_type = outside<br/>","<b>Gadd Street Air Quality<\/b><br/><b>deviceDeploymentID = ae58d46b50517bb2_39561<\/b><br/><b>pm25_1hr = 0.9 µg/m3<\/b><br/>temperature = 67 F<br/>humidity = 50%<br/>pm25_1hr = 0.9 µg/m3<br/>pm25_1day = 16.9 µg/m3<br/>location_type = outside<br/>","<b>Girards Hill<\/b><br/><b>deviceDeploymentID = c54ac627c84f14a7_36289<\/b><br/><b>pm25_1hr = 16.3 µg/m3<\/b><br/>temperature = 79 F<br/>humidity = 67%<br/>pm25_1hr = 16.3 µg/m3<br/>pm25_1day = 19.4 µg/m3<br/>location_type = outside<br/>","<b>Glen Street, Milson’s Point, NSW, Australia<\/b><br/><b>deviceDeploymentID = 0f5360e8477f77b6_23033<\/b><br/><b>pm25_1hr = 33.8 µg/m3<\/b><br/>temperature = 77 F<br/>humidity = 44%<br/>pm25_1hr = 33.8 µg/m3<br/>pm25_1day = 32.8 µg/m3<br/>location_type = outside<br/>","<b>Goldtower Charters Towers<\/b><br/><b>deviceDeploymentID = 0b5cd407521bc83c_6342<\/b><br/><b>pm25_1hr = 9.5 µg/m3<\/b><br/>temperature = 86 F<br/>humidity = 55%<br/>pm25_1hr = 9.5 µg/m3<br/>pm25_1day = 6.4 µg/m3<br/>location_type = outside<br/>","<b>Gymea Bay<\/b><br/><b>deviceDeploymentID = 2bab72a73846edad_16109<\/b><br/><b>pm25_1hr = 72.8 µg/m3<\/b><br/>temperature = NA F<br/>humidity = NA%<br/>pm25_1hr = 72.8 µg/m3<br/>pm25_1day = 39.7 µg/m3<br/>location_type = outside<br/>","<b>Gymea Bay Weather<\/b><br/><b>deviceDeploymentID = 4e093148b93fec01_4888<\/b><br/><b>pm25_1hr = 69.4 µg/m3<\/b><br/>temperature = NA F<br/>humidity = NA%<br/>pm25_1hr = 69.4 µg/m3<br/>pm25_1day = 38.1 µg/m3<br/>location_type = outside<br/>","<b>Hamilton <\/b><br/><b>deviceDeploymentID = e2264f0fea46d151_12745<\/b><br/><b>pm25_1hr = 2.4 µg/m3<\/b><br/>temperature = 69 F<br/>humidity = 53%<br/>pm25_1hr = 2.4 µg/m3<br/>pm25_1day = 9.6 µg/m3<br/>location_type = outside<br/>","<b>Heathcote<\/b><br/><b>deviceDeploymentID = 3148e7b635f7e223_13985<\/b><br/><b>pm25_1hr = 88.5 µg/m3<\/b><br/>temperature = 76 F<br/>humidity = 48%<br/>pm25_1hr = 88.5 µg/m3<br/>pm25_1day = 41.9 µg/m3<br/>location_type = outside<br/>","<b>Home<\/b><br/><b>deviceDeploymentID = 9e1e6aa2d272337a_43027<\/b><br/><b>pm25_1hr = 27.6 µg/m3<\/b><br/>temperature = 74 F<br/>humidity = 50%<br/>pm25_1hr = 27.6 µg/m3<br/>pm25_1day = 29.7 µg/m3<br/>location_type = outside<br/>","<b>Hurstville<\/b><br/><b>deviceDeploymentID = 69fe6dd21cb2efe7_41971<\/b><br/><b>pm25_1hr = 56.7 µg/m3<\/b><br/>temperature = 77 F<br/>humidity = 43%<br/>pm25_1hr = 56.7 µg/m3<br/>pm25_1day = 40.8 µg/m3<br/>location_type = outside<br/>","<b>Jannali<\/b><br/><b>deviceDeploymentID = 60448d5ad7eb3264_34939<\/b><br/><b>pm25_1hr = 64.4 µg/m3<\/b><br/>temperature = 78 F<br/>humidity = 47%<br/>pm25_1hr = 64.4 µg/m3<br/>pm25_1day = 39.2 µg/m3<br/>location_type = outside<br/>","<b>Kingston<\/b><br/><b>deviceDeploymentID = ccd494625fc51f21_2554<\/b><br/><b>pm25_1hr = 0.9 µg/m3<\/b><br/>temperature = 63 F<br/>humidity = 41%<br/>pm25_1hr = 0.9 µg/m3<br/>pm25_1day = 4.8 µg/m3<br/>location_type = outside<br/>","<b>Lot 331 Station<\/b><br/><b>deviceDeploymentID = 57e81317e013a409_43779<\/b><br/><b>pm25_1hr = 28.7 µg/m3<\/b><br/>temperature = 77 F<br/>humidity = 51%<br/>pm25_1hr = 28.7 µg/m3<br/>pm25_1day = 27.9 µg/m3<br/>location_type = outside<br/>","<b>MORUYA HEADS<\/b><br/><b>deviceDeploymentID = 01309a490e3cf5b4_36471<\/b><br/><b>pm25_1hr = 191.7 µg/m3<\/b><br/>temperature = 70 F<br/>humidity = 50%<br/>pm25_1hr = 191.7 µg/m3<br/>pm25_1day = 120 µg/m3<br/>location_type = outside<br/>","<b>Mosman<\/b><br/><b>deviceDeploymentID = c75fdb5b910c5e4a_44913<\/b><br/><b>pm25_1hr = 35 µg/m3<\/b><br/>temperature = 77 F<br/>humidity = 47%<br/>pm25_1hr = 35 µg/m3<br/>pm25_1day = 31.4 µg/m3<br/>location_type = outside<br/>","<b>Mount Isa<\/b><br/><b>deviceDeploymentID = 17690a5df63fdf5c_3402<\/b><br/><b>pm25_1hr = 11.8 µg/m3<\/b><br/>temperature = 90 F<br/>humidity = 27%<br/>pm25_1hr = 11.8 µg/m3<br/>pm25_1day = 9.8 µg/m3<br/>location_type = outside<br/>","<b>MQ_Con2<\/b><br/><b>deviceDeploymentID = 7fd8390d038d2796_25911<\/b><br/><b>pm25_1hr = 35.9 µg/m3<\/b><br/>temperature = 75 F<br/>humidity = 49%<br/>pm25_1hr = 35.9 µg/m3<br/>pm25_1day = 33 µg/m3<br/>location_type = outside<br/>","<b>mySmart<\/b><br/><b>deviceDeploymentID = 225e8cdb6573000a_4923<\/b><br/><b>pm25_1hr = 0 µg/m3<\/b><br/>temperature = 82 F<br/>humidity = 36%<br/>pm25_1hr = 0 µg/m3<br/>pm25_1day = 0 µg/m3<br/>location_type = outside<br/>","<b>mySmart Farm - Silverdale 1<\/b><br/><b>deviceDeploymentID = 06e72d77e5abd044_4900<\/b><br/><b>pm25_1hr = 50.7 µg/m3<\/b><br/>temperature = 74 F<br/>humidity = 100%<br/>pm25_1hr = 50.7 µg/m3<br/>pm25_1day = 51.6 µg/m3<br/>location_type = outside<br/>","<b>Newcastle City<\/b><br/><b>deviceDeploymentID = b2c51e9db615d2d9_36567<\/b><br/><b>pm25_1hr = 34.5 µg/m3<\/b><br/>temperature = 76 F<br/>humidity = 43%<br/>pm25_1hr = 34.5 µg/m3<br/>pm25_1day = 29.4 µg/m3<br/>location_type = outside<br/>","<b>Nimbin Rocks - Coffee Camp<\/b><br/><b>deviceDeploymentID = 3f26966135b38ed8_38523<\/b><br/><b>pm25_1hr = 17 µg/m3<\/b><br/>temperature = 82 F<br/>humidity = 66%<br/>pm25_1hr = 17 µg/m3<br/>pm25_1day = 20 µg/m3<br/>location_type = outside<br/>","<b>Oaka Hill<\/b><br/><b>deviceDeploymentID = 305a180e55f4f1f8_33963<\/b><br/><b>pm25_1hr = 19.6 µg/m3<\/b><br/>temperature = 84 F<br/>humidity = 69%<br/>pm25_1hr = 19.6 µg/m3<br/>pm25_1day = 15.4 µg/m3<br/>location_type = outside<br/>","<b>Ormond<\/b><br/><b>deviceDeploymentID = 1e7aeba79248bec9_10526<\/b><br/><b>pm25_1hr = 0.7 µg/m3<\/b><br/>temperature = 68 F<br/>humidity = 47%<br/>pm25_1hr = 0.7 µg/m3<br/>pm25_1day = 17 µg/m3<br/>location_type = outside<br/>","<b>PA5<\/b><br/><b>deviceDeploymentID = 4d66701f0d9dafa6_30045<\/b><br/><b>pm25_1hr = 72.2 µg/m3<\/b><br/>temperature = 80 F<br/>humidity = 45%<br/>pm25_1hr = 72.2 µg/m3<br/>pm25_1day = 31.1 µg/m3<br/>location_type = outside<br/>","<b>Paddo Deck<\/b><br/><b>deviceDeploymentID = 91bd6973e53e35bb_45777<\/b><br/><b>pm25_1hr = 11 µg/m3<\/b><br/>temperature = 81 F<br/>humidity = 64%<br/>pm25_1hr = 11 µg/m3<br/>pm25_1day = 14.6 µg/m3<br/>location_type = outside<br/>","<b>Para Hills West<\/b><br/><b>deviceDeploymentID = 89f6ed3faa667a06_40181<\/b><br/><b>pm25_1hr = 2.5 µg/m3<\/b><br/>temperature = 65 F<br/>humidity = 47%<br/>pm25_1hr = 2.5 µg/m3<br/>pm25_1day = 19.1 µg/m3<br/>location_type = outside<br/>","<b>Peel Street Bathurst<\/b><br/><b>deviceDeploymentID = 7788761a2b32f69e_43565<\/b><br/><b>pm25_1hr = 43.8 µg/m3<\/b><br/>temperature = 69 F<br/>humidity = 54%<br/>pm25_1hr = 43.8 µg/m3<br/>pm25_1day = 33.9 µg/m3<br/>location_type = outside<br/>","<b>Peterborough<\/b><br/><b>deviceDeploymentID = 2a9d4f4e92af2742_2482<\/b><br/><b>pm25_1hr = 1.6 µg/m3<\/b><br/>temperature = 66 F<br/>humidity = 45%<br/>pm25_1hr = 1.6 µg/m3<br/>pm25_1day = 11.2 µg/m3<br/>location_type = outside<br/>","<b>PIE Armidale<\/b><br/><b>deviceDeploymentID = af2863ae1098184c_29949<\/b><br/><b>pm25_1hr = 3.5 µg/m3<\/b><br/>temperature = 65 F<br/>humidity = 67%<br/>pm25_1hr = 3.5 µg/m3<br/>pm25_1day = 20.3 µg/m3<br/>location_type = outside<br/>","<b>PIE Orange<\/b><br/><b>deviceDeploymentID = 75690268cd804ded_29945<\/b><br/><b>pm25_1hr = 38.9 µg/m3<\/b><br/>temperature = 66 F<br/>humidity = 54%<br/>pm25_1hr = 38.9 µg/m3<br/>pm25_1day = 28.2 µg/m3<br/>location_type = outside<br/>","<b>PIE Wagga<\/b><br/><b>deviceDeploymentID = aafed741fa264831_29959<\/b><br/><b>pm25_1hr = 5 µg/m3<\/b><br/>temperature = 72 F<br/>humidity = 37%<br/>pm25_1hr = 5 µg/m3<br/>pm25_1day = 40.7 µg/m3<br/>location_type = outside<br/>","<b>Snug Tiers<\/b><br/><b>deviceDeploymentID = 110d0225d155c14f_26275<\/b><br/><b>pm25_1hr = 0.7 µg/m3<\/b><br/>temperature = 62 F<br/>humidity = 44%<br/>pm25_1hr = 0.7 µg/m3<br/>pm25_1day = 4.7 µg/m3<br/>location_type = outside<br/>","<b>Springfield Lakes<\/b><br/><b>deviceDeploymentID = 9c2e3d283d773891_26675<\/b><br/><b>pm25_1hr = 4 µg/m3<\/b><br/>temperature = 83 F<br/>humidity = 53%<br/>pm25_1hr = 4 µg/m3<br/>pm25_1day = 16 µg/m3<br/>location_type = outside<br/>","<b>St Ives Chase<\/b><br/><b>deviceDeploymentID = 5eb6929bb0f88fdf_44387<\/b><br/><b>pm25_1hr = 39.1 µg/m3<\/b><br/>temperature = 73 F<br/>humidity = 52%<br/>pm25_1hr = 39.1 µg/m3<br/>pm25_1day = 35.5 µg/m3<br/>location_type = outside<br/>","<b>St Lucia - 6th Ave<\/b><br/><b>deviceDeploymentID = 5ca751a9068d377f_11650<\/b><br/><b>pm25_1hr = 10.2 µg/m3<\/b><br/>temperature = 85 F<br/>humidity = 66%<br/>pm25_1hr = 10.2 µg/m3<br/>pm25_1day = 17.6 µg/m3<br/>location_type = outside<br/>","<b>The Vines, Perth<\/b><br/><b>deviceDeploymentID = 24d0d3c1f38b9622_39967<\/b><br/><b>pm25_1hr = 0.1 µg/m3<\/b><br/>temperature = 73 F<br/>humidity = 44%<br/>pm25_1hr = 0.1 µg/m3<br/>pm25_1day = 0.6 µg/m3<br/>location_type = outside<br/>","<b>Warriewood, NSW, AU<\/b><br/><b>deviceDeploymentID = dbd3b83b1e88537d_1614<\/b><br/><b>pm25_1hr = 32 µg/m3<\/b><br/>temperature = 80 F<br/>humidity = 41%<br/>pm25_1hr = 32 µg/m3<br/>pm25_1day = 30.7 µg/m3<br/>location_type = outside<br/>","<b>Werribbee Street North Park<\/b><br/><b>deviceDeploymentID = 31c9b2fe76e60740_13061<\/b><br/><b>pm25_1hr = 0.4 µg/m3<\/b><br/>temperature = 67 F<br/>humidity = 52%<br/>pm25_1hr = 0.4 µg/m3<br/>pm25_1day = 15.4 µg/m3<br/>location_type = outside<br/>","<b>Williamstown Beach<\/b><br/><b>deviceDeploymentID = e14c4071acc1493d_36813<\/b><br/><b>pm25_1hr = 1.3 µg/m3<\/b><br/>temperature = 65 F<br/>humidity = 53%<br/>pm25_1hr = 1.3 µg/m3<br/>pm25_1day = 16.8 µg/m3<br/>location_type = outside<br/>","<b>Windang, Ocean Street<\/b><br/><b>deviceDeploymentID = 005758dfa2787144_37063<\/b><br/><b>pm25_1hr = 185 µg/m3<\/b><br/>temperature = 72 F<br/>humidity = 56%<br/>pm25_1hr = 185 µg/m3<br/>pm25_1day = 55.7 µg/m3<br/>location_type = outside<br/>","<b>Wishart Outlook<\/b><br/><b>deviceDeploymentID = 53c3563912b33c40_2568<\/b><br/><b>pm25_1hr = 12 µg/m3<\/b><br/>temperature = 86 F<br/>humidity = 61%<br/>pm25_1hr = 12 µg/m3<br/>pm25_1day = 17.4 µg/m3<br/>location_type = outside<br/>"],null,null,{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},null]},{"method":"addLegend","args":[{"colors":["#7E0023","#8F3F97","#FF0000","#FF7E00","#FFFF00","#00E400"],"labels":["Hazardous","Very Unhealthy","Unhealthy","USG","Moderate","Good"],"na_color":null,"na_label":"NA","opacity":1,"position":"bottomright","type":"unknown","title":"AQI","extra":null,"layerId":null,"className":"info legend","group":null}]}],"limits":{"lat":[-43.06194,-20.07086],"lng":[115.992144,153.278796]}},"evals":[],"jsHooks":[]}</script>
</div>
<div id="load-time-series-data-for-a-sensor" class="section level3">
<h3 class="hasAnchor">
<a href="#load-time-series-data-for-a-sensor" class="anchor"></a>Load time series data for a sensor</h3>
<p>On January 15, 2020, the leaflet plot showed unhealthy air quality for Sydney. Let’s look at data from a sensor in the Sydney area for the time period covering the Australian wildfires. One of those sensors is labeled “Jannali”</p>
<p>The following chunk will check to see if the <em>pat</em> object for the sensor named “Jannali” has already been created the local directory and will recreate it if needed.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb5-1" data-line-number="1">label &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"Jannali"</span> )</a>
<a class="sourceLine" id="cb5-2" data-line-number="2"></a>
<a class="sourceLine" id="cb5-3" data-line-number="3">filePath_jannali &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/file.path.html">file.path</a></span>(archiveBaseDir, <span class="st">"pat_jannali.rda"</span>)</a>
<a class="sourceLine" id="cb5-4" data-line-number="4"></a>
<a class="sourceLine" id="cb5-5" data-line-number="5"><span class="cf">if</span> ( <span class="kw"><a href="https://rdrr.io/r/base/files.html">file.exists</a></span>(filePath_jannali) ) {</a>
<a class="sourceLine" id="cb5-6" data-line-number="6">  pat_jannali &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/get.html">get</a></span>(<span class="kw"><a href="https://rdrr.io/r/base/load.html">load</a></span>(filePath_jannali))</a>
<a class="sourceLine" id="cb5-7" data-line-number="7">} <span class="cf">else</span> {</a>
<a class="sourceLine" id="cb5-8" data-line-number="8">  pat_jannali &lt;-<span class="st"> </span><span class="kw"><a href="../../reference/pat_createNew.html">pat_createNew</a></span>(</a>
<a class="sourceLine" id="cb5-9" data-line-number="9">    <span class="dt">pas =</span> pas, </a>
<a class="sourceLine" id="cb5-10" data-line-number="10">    <span class="dt">label =</span> label, </a>
<a class="sourceLine" id="cb5-11" data-line-number="11">    <span class="dt">startdate =</span> <span class="dv">20191229</span>, </a>
<a class="sourceLine" id="cb5-12" data-line-number="12">    <span class="dt">enddate =</span> <span class="dv">20200110</span></a>
<a class="sourceLine" id="cb5-13" data-line-number="13">  )</a>
<a class="sourceLine" id="cb5-14" data-line-number="14">  <span class="kw"><a href="https://rdrr.io/r/base/save.html">save</a></span>(pat_jannali, <span class="dt">file =</span> filePath_jannali)</a>
<a class="sourceLine" id="cb5-15" data-line-number="15">}</a></code></pre></div>
</div>
<div id="view-a-pat-timeseries" class="section level3">
<h3 class="hasAnchor">
<a href="#view-a-pat-timeseries" class="anchor"></a>View a <em>pat</em> timeseries</h3>
<p>A <em>pat</em> object is a list of two dataframes, one called <code>meta</code> containing spatial metadata associated with the sensor and another called <code>data</code> containing that sensor’s time series data. Each <em>pat</em> object contains time series data for a temperature channel, a humidity channel, A and B PM 2.5 channel’s, and several other fields.</p>
<p>The following chunk demonstrates use of the <code><a href="../../reference/pat_multiplot.html">pat_multiplot()</a></code> function to have a quick look at the data contained in a <em>pat</em> object. The plot shows both A and B channels as well as temperature and humidity. The plotting function is flexible and has options for choosing which channels to display, on the same or individual axes. (<em>Type <code><a href="../../reference/pat_multiplot.html">?pat_multiplot</a></code> to learn more.</em>)</p>
<p>In this case we see that the data look good. Channels A and B are both showing lots of PM 2.5 data for “Jannali” over the period of interest</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb6-1" data-line-number="1"><span class="kw"><a href="../../reference/pat_multiplot.html">pat_multiplot</a></span>(pat_jannali)</a></code></pre></div>
<p><img src="Australia_on_fire_files/figure-html/view_pats-1.png" width="672"></p>
</div>
</div>
<div id="explore-the-pas-object" class="section level2">
<h2 class="hasAnchor">
<a href="#explore-the-pas-object" class="anchor"></a>Explore the <em>pas</em> object</h2>
<p>For the purposes of this exploratory example, we are focusing on Australia but maybe we want to filter even more and just look at the sensors within a certain radius of the one we chose in Sydney.</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb7-1" data-line-number="1">lon &lt;-<span class="st"> </span>pat_jannali<span class="op">$</span>meta<span class="op">$</span>longitude</a>
<a class="sourceLine" id="cb7-2" data-line-number="2">lat &lt;-<span class="st"> </span>pat_jannali<span class="op">$</span>meta<span class="op">$</span>latitude</a>
<a class="sourceLine" id="cb7-3" data-line-number="3"></a>
<a class="sourceLine" id="cb7-4" data-line-number="4">pas_sydney &lt;-<span class="st"> </span></a>
<a class="sourceLine" id="cb7-5" data-line-number="5"><span class="st">  </span>pas_au <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb7-6" data-line-number="6"><span class="st">  </span><span class="kw"><a href="../../reference/pas_filterNear.html">pas_filterNear</a></span>(</a>
<a class="sourceLine" id="cb7-7" data-line-number="7">    <span class="dt">longitude =</span> lon, </a>
<a class="sourceLine" id="cb7-8" data-line-number="8">    <span class="dt">latitude =</span> lat, </a>
<a class="sourceLine" id="cb7-9" data-line-number="9">    <span class="dt">radius =</span> <span class="st">"50 km"</span></a>
<a class="sourceLine" id="cb7-10" data-line-number="10">  ) </a>
<a class="sourceLine" id="cb7-11" data-line-number="11"></a>
<a class="sourceLine" id="cb7-12" data-line-number="12"><span class="kw"><a href="../../reference/pas_leaflet.html">pas_leaflet</a></span>(pas_sydney)</a></code></pre></div>
<div id="htmlwidget-7372531810cafd413856" style="width:672px;height:480px;" class="leaflet html-widget"></div>
<script type="application/json" data-for="htmlwidget-7372531810cafd413856">{"x":{"options":{"crs":{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,"options":{}}},"setView":[[-33.879866,150.964558],9,[]],"calls":[{"method":"addProviderTiles","args":["Esri.WorldTopoMap",null,null,{"errorTileUrl":"","noWrap":false,"detectRetina":false}]},{"method":"addCircleMarkers","args":[[-33.860263,-33.748231,-33.666833,-33.847175,-34.047465,-34.047754,-34.092899,-33.967445,-34.020011,-33.832318,-33.738185,-33.785794,-33.933838,-33.703981,-33.678161],[151.182855,151.253185,151.312024,151.210579,151.079989,151.079893,150.998719,151.100832,151.060456,151.245973,151.092065,151.133002,150.617092,151.161934,151.285714],10,["Balmain","Beacon Hill","Crescent Road Mona Vale NSW Australia","Glen Street, Milson’s Point, NSW, Australia","Gymea Bay","Gymea Bay Weather","Heathcote","Hurstville","Jannali","Mosman","MQ_Con2","mySmart","mySmart Farm - Silverdale 1","St Ives Chase","Warriewood, NSW, AU"],null,{"interactive":true,"className":"","stroke":false,"color":"#03F","weight":5,"opacity":0.5,"fill":true,"fillColor":["#FF7E00","#FF7E00","#FFFF00","#FFFF00","#FF0000","#FF0000","#FF0000","#FF0000","#FF0000","#FFFF00","#FF7E00","#00E400","#FF7E00","#FF7E00","#FFFF00"],"fillOpacity":0.8},null,null,["<b>Balmain<\/b><br/><b>deviceDeploymentID = 6dd10047a7f5463a_16831<\/b><br/><b>pm25_1hr = 39.3 µg/m3<\/b><br/>temperature = 78 F<br/>humidity = 91%<br/>pm25_1hr = 39.3 µg/m3<br/>pm25_1day = 37.7 µg/m3<br/>location_type = outside<br/>","<b>Beacon Hill<\/b><br/><b>deviceDeploymentID = 7117cb835e41775b_44165<\/b><br/><b>pm25_1hr = 35.9 µg/m3<\/b><br/>temperature = 74 F<br/>humidity = 49%<br/>pm25_1hr = 35.9 µg/m3<br/>pm25_1day = 34 µg/m3<br/>location_type = outside<br/>","<b>Crescent Road Mona Vale NSW Australia<\/b><br/><b>deviceDeploymentID = 1c1f9558bf1f6245_37283<\/b><br/><b>pm25_1hr = 30.1 µg/m3<\/b><br/>temperature = 75 F<br/>humidity = 50%<br/>pm25_1hr = 30.1 µg/m3<br/>pm25_1day = 24.7 µg/m3<br/>location_type = outside<br/>","<b>Glen Street, Milson’s Point, NSW, Australia<\/b><br/><b>deviceDeploymentID = 0f5360e8477f77b6_23033<\/b><br/><b>pm25_1hr = 33.8 µg/m3<\/b><br/>temperature = 77 F<br/>humidity = 44%<br/>pm25_1hr = 33.8 µg/m3<br/>pm25_1day = 32.8 µg/m3<br/>location_type = outside<br/>","<b>Gymea Bay<\/b><br/><b>deviceDeploymentID = 2bab72a73846edad_16109<\/b><br/><b>pm25_1hr = 72.8 µg/m3<\/b><br/>temperature = NA F<br/>humidity = NA%<br/>pm25_1hr = 72.8 µg/m3<br/>pm25_1day = 39.7 µg/m3<br/>location_type = outside<br/>","<b>Gymea Bay Weather<\/b><br/><b>deviceDeploymentID = 4e093148b93fec01_4888<\/b><br/><b>pm25_1hr = 69.4 µg/m3<\/b><br/>temperature = NA F<br/>humidity = NA%<br/>pm25_1hr = 69.4 µg/m3<br/>pm25_1day = 38.1 µg/m3<br/>location_type = outside<br/>","<b>Heathcote<\/b><br/><b>deviceDeploymentID = 3148e7b635f7e223_13985<\/b><br/><b>pm25_1hr = 88.5 µg/m3<\/b><br/>temperature = 76 F<br/>humidity = 48%<br/>pm25_1hr = 88.5 µg/m3<br/>pm25_1day = 41.9 µg/m3<br/>location_type = outside<br/>","<b>Hurstville<\/b><br/><b>deviceDeploymentID = 69fe6dd21cb2efe7_41971<\/b><br/><b>pm25_1hr = 56.7 µg/m3<\/b><br/>temperature = 77 F<br/>humidity = 43%<br/>pm25_1hr = 56.7 µg/m3<br/>pm25_1day = 40.8 µg/m3<br/>location_type = outside<br/>","<b>Jannali<\/b><br/><b>deviceDeploymentID = 60448d5ad7eb3264_34939<\/b><br/><b>pm25_1hr = 64.4 µg/m3<\/b><br/>temperature = 78 F<br/>humidity = 47%<br/>pm25_1hr = 64.4 µg/m3<br/>pm25_1day = 39.2 µg/m3<br/>location_type = outside<br/>","<b>Mosman<\/b><br/><b>deviceDeploymentID = c75fdb5b910c5e4a_44913<\/b><br/><b>pm25_1hr = 35 µg/m3<\/b><br/>temperature = 77 F<br/>humidity = 47%<br/>pm25_1hr = 35 µg/m3<br/>pm25_1day = 31.4 µg/m3<br/>location_type = outside<br/>","<b>MQ_Con2<\/b><br/><b>deviceDeploymentID = 7fd8390d038d2796_25911<\/b><br/><b>pm25_1hr = 35.9 µg/m3<\/b><br/>temperature = 75 F<br/>humidity = 49%<br/>pm25_1hr = 35.9 µg/m3<br/>pm25_1day = 33 µg/m3<br/>location_type = outside<br/>","<b>mySmart<\/b><br/><b>deviceDeploymentID = 225e8cdb6573000a_4923<\/b><br/><b>pm25_1hr = 0 µg/m3<\/b><br/>temperature = 82 F<br/>humidity = 36%<br/>pm25_1hr = 0 µg/m3<br/>pm25_1day = 0 µg/m3<br/>location_type = outside<br/>","<b>mySmart Farm - Silverdale 1<\/b><br/><b>deviceDeploymentID = 06e72d77e5abd044_4900<\/b><br/><b>pm25_1hr = 50.7 µg/m3<\/b><br/>temperature = 74 F<br/>humidity = 100%<br/>pm25_1hr = 50.7 µg/m3<br/>pm25_1day = 51.6 µg/m3<br/>location_type = outside<br/>","<b>St Ives Chase<\/b><br/><b>deviceDeploymentID = 5eb6929bb0f88fdf_44387<\/b><br/><b>pm25_1hr = 39.1 µg/m3<\/b><br/>temperature = 73 F<br/>humidity = 52%<br/>pm25_1hr = 39.1 µg/m3<br/>pm25_1day = 35.5 µg/m3<br/>location_type = outside<br/>","<b>Warriewood, NSW, AU<\/b><br/><b>deviceDeploymentID = dbd3b83b1e88537d_1614<\/b><br/><b>pm25_1hr = 32 µg/m3<\/b><br/>temperature = 80 F<br/>humidity = 41%<br/>pm25_1hr = 32 µg/m3<br/>pm25_1day = 30.7 µg/m3<br/>location_type = outside<br/>"],null,null,{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},null]},{"method":"addLegend","args":[{"colors":["#7E0023","#8F3F97","#FF0000","#FF7E00","#FFFF00","#00E400"],"labels":["Hazardous","Very Unhealthy","Unhealthy","USG","Moderate","Good"],"na_color":null,"na_label":"NA","opacity":1,"position":"bottomright","type":"unknown","title":"AQI","extra":null,"layerId":null,"className":"info legend","group":null}]}],"limits":{"lat":[-34.092899,-33.666833],"lng":[150.617092,151.312024]}},"evals":[],"jsHooks":[]}</script><div id="filter-the-pas-based-on-conditions" class="section level3">
<h3 class="hasAnchor">
<a href="#filter-the-pas-based-on-conditions" class="anchor"></a>Filter the <em>pas</em> based on conditions</h3>
<p>On Januar 15, 2020, the air quality in Sydney appeared to be unhealthy. [<em>Using a <em>pas</em> object created don that day</em>] we can look for the sensors that are reporting the highest <code>pm25</code> levels.</p>
<p>The next chunk of code filters the <em>pas</em> for the sensors that have a reported <code>pm25</code> value higher than 150.</p>
<p>It is important to note here that the sensors listed in the <em>pas</em> after filtering will depend on the date that the original <em>pas</em> was generated. Since dat avalues are only valid for the time a <em>pas</em> is created, the <em>pas</em> that you use may show different for the same sensors generated with <em>pas</em> that we are using here. This document was created using a <em>pas</em> with data from January 15, 2020.</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb8-1" data-line-number="1">pas_high_pm25 &lt;-<span class="st"> </span></a>
<a class="sourceLine" id="cb8-2" data-line-number="2"><span class="st">  </span>pas_au<span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb8-3" data-line-number="3"><span class="st">  </span><span class="kw"><a href="../../reference/pas_filter.html">pas_filter</a></span>(pm25_1hr <span class="op">&gt;</span><span class="st"> </span><span class="dv">150</span>)</a>
<a class="sourceLine" id="cb8-4" data-line-number="4"></a>
<a class="sourceLine" id="cb8-5" data-line-number="5"><span class="kw"><a href="../../reference/pas_leaflet.html">pas_leaflet</a></span>(pas_high_pm25)</a></code></pre></div>
<div id="htmlwidget-add34eb09f4b6b5ca88e" style="width:672px;height:480px;" class="leaflet html-widget"></div>
<script type="application/json" data-for="htmlwidget-add34eb09f4b6b5ca88e">{"x":{"options":{"crs":{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,"options":{}}},"setView":[[-35.2210055,150.1602365],8,[]],"calls":[{"method":"addProviderTiles","args":["Esri.WorldTopoMap",null,null,{"errorTileUrl":"","noWrap":false,"detectRetina":false}]},{"method":"addCircleMarkers","args":[[-35.245241,-35.912929,-34.529082],[149.448004,150.154739,150.872469],10,["Bungendore, NSW Australia","MORUYA HEADS","Windang, Ocean Street"],null,{"interactive":true,"className":"","stroke":false,"color":"#03F","weight":5,"opacity":0.5,"fill":true,"fillColor":["#8F3F97","#8F3F97","#8F3F97"],"fillOpacity":0.8},null,null,["<b>Bungendore, NSW Australia<\/b><br/><b>deviceDeploymentID = f4f4c6d16c637bf5_45307<\/b><br/><b>pm25_1hr = 164.7 µg/m3<\/b><br/>temperature = 67 F<br/>humidity = 59%<br/>pm25_1hr = 164.7 µg/m3<br/>pm25_1day = 91.2 µg/m3<br/>location_type = outside<br/>","<b>MORUYA HEADS<\/b><br/><b>deviceDeploymentID = 01309a490e3cf5b4_36471<\/b><br/><b>pm25_1hr = 191.7 µg/m3<\/b><br/>temperature = 70 F<br/>humidity = 50%<br/>pm25_1hr = 191.7 µg/m3<br/>pm25_1day = 120 µg/m3<br/>location_type = outside<br/>","<b>Windang, Ocean Street<\/b><br/><b>deviceDeploymentID = 005758dfa2787144_37063<\/b><br/><b>pm25_1hr = 185 µg/m3<\/b><br/>temperature = 72 F<br/>humidity = 56%<br/>pm25_1hr = 185 µg/m3<br/>pm25_1day = 55.7 µg/m3<br/>location_type = outside<br/>"],null,null,{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},null]},{"method":"addLegend","args":[{"colors":["#7E0023","#8F3F97","#FF0000","#FF7E00","#FFFF00","#00E400"],"labels":["Hazardous","Very Unhealthy","Unhealthy","USG","Moderate","Good"],"na_color":null,"na_label":"NA","opacity":1,"position":"bottomright","type":"unknown","title":"AQI","extra":null,"layerId":null,"className":"info legend","group":null}]}],"limits":{"lat":[-35.912929,-34.529082],"lng":[149.448004,150.872469]}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<div id="explore-the-pat-data" class="section level2">
<h2 class="hasAnchor">
<a href="#explore-the-pat-data" class="anchor"></a>Explore the <em>pat</em> data</h2>
<div id="download-pat-data" class="section level3">
<h3 class="hasAnchor">
<a href="#download-pat-data" class="anchor"></a>Download <em>pat</em> data</h3>
<p>Now that the <em>pas</em> has been filtered based on the worst air quality, we can create <em>pat</em> objets for sensors listed in the <em>pas</em>. You could download all the sensors in the newly filtered <em>pas</em> but, for the purposes of reproducibility, we will continue to use the <code>pas_au</code> object as the reference <em>pas</em> to ensure that the sensors referenced are present. Again, this is due to the ephemeral nature of the data in a <em>pas</em> object which is only valid when it is initially created..</p>
<p>Since the fires in Australia started, new PurpleAir sensors have been popping up left and right. Let’s start by grabbing data from sensors with the longest history. The following chunk will check to see if the <em>pat</em> objects are already in the local data directory, if not, they will be downloaded.</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb9-1" data-line-number="1">startdate &lt;-<span class="st"> </span><span class="dv">10191210</span></a>
<a class="sourceLine" id="cb9-2" data-line-number="2">enddate &lt;-<span class="st"> </span><span class="dv">20200110</span></a>
<a class="sourceLine" id="cb9-3" data-line-number="3"></a>
<a class="sourceLine" id="cb9-4" data-line-number="4">filePath_chisholm &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/file.path.html">file.path</a></span>(archiveBaseDir, <span class="st">"pat_chisholm.rda"</span>)</a>
<a class="sourceLine" id="cb9-5" data-line-number="5"><span class="cf">if</span> ( <span class="kw"><a href="https://rdrr.io/r/base/files.html">file.exists</a></span>(filePath_chisholm) ) {</a>
<a class="sourceLine" id="cb9-6" data-line-number="6">  pat_chisholm &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/get.html">get</a></span>(<span class="kw"><a href="https://rdrr.io/r/base/load.html">load</a></span>(filePath_chisholm))</a>
<a class="sourceLine" id="cb9-7" data-line-number="7">} <span class="cf">else</span> {</a>
<a class="sourceLine" id="cb9-8" data-line-number="8">  pat_chisholm &lt;-<span class="st"> </span><span class="kw"><a href="../../reference/pat_createNew.html">pat_createNew</a></span>(</a>
<a class="sourceLine" id="cb9-9" data-line-number="9">    <span class="dt">label =</span> <span class="st">"Chisholm ACT Australia"</span>,</a>
<a class="sourceLine" id="cb9-10" data-line-number="10">    <span class="dt">pas =</span> pas_au,</a>
<a class="sourceLine" id="cb9-11" data-line-number="11">    <span class="dt">startdate =</span> startdate,</a>
<a class="sourceLine" id="cb9-12" data-line-number="12">    <span class="dt">enddate =</span> enddate</a>
<a class="sourceLine" id="cb9-13" data-line-number="13">  )</a>
<a class="sourceLine" id="cb9-14" data-line-number="14">}</a>
<a class="sourceLine" id="cb9-15" data-line-number="15"></a>
<a class="sourceLine" id="cb9-16" data-line-number="16">filePath_moruya &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/file.path.html">file.path</a></span>(archiveBaseDir, <span class="st">"pat_moruya.rda"</span>)</a>
<a class="sourceLine" id="cb9-17" data-line-number="17"><span class="cf">if</span> ( <span class="kw"><a href="https://rdrr.io/r/base/files.html">file.exists</a></span>(filePath_moruya) ) {</a>
<a class="sourceLine" id="cb9-18" data-line-number="18">  pat_moruya &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/get.html">get</a></span>(<span class="kw"><a href="https://rdrr.io/r/base/load.html">load</a></span>(filePath_moruya))</a>
<a class="sourceLine" id="cb9-19" data-line-number="19">} <span class="cf">else</span> {</a>
<a class="sourceLine" id="cb9-20" data-line-number="20">  pat_moruya &lt;-<span class="st"> </span><span class="kw"><a href="../../reference/pat_createNew.html">pat_createNew</a></span>(</a>
<a class="sourceLine" id="cb9-21" data-line-number="21">    <span class="dt">label =</span> <span class="st">"MORUYA HEADS"</span>,</a>
<a class="sourceLine" id="cb9-22" data-line-number="22">    <span class="dt">pas =</span> pas_au,</a>
<a class="sourceLine" id="cb9-23" data-line-number="23">    <span class="dt">startdate =</span> startdate,</a>
<a class="sourceLine" id="cb9-24" data-line-number="24">    <span class="dt">enddate =</span> enddate</a>
<a class="sourceLine" id="cb9-25" data-line-number="25">  )</a>
<a class="sourceLine" id="cb9-26" data-line-number="26">} </a>
<a class="sourceLine" id="cb9-27" data-line-number="27"></a>
<a class="sourceLine" id="cb9-28" data-line-number="28">filePath_windang &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/file.path.html">file.path</a></span>(archiveBaseDir, <span class="st">"pat_windang.rda"</span>)</a>
<a class="sourceLine" id="cb9-29" data-line-number="29"><span class="cf">if</span> ( <span class="kw"><a href="https://rdrr.io/r/base/files.html">file.exists</a></span>(filePath_windang) ) {</a>
<a class="sourceLine" id="cb9-30" data-line-number="30">  pat_windang &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/get.html">get</a></span>(<span class="kw"><a href="https://rdrr.io/r/base/load.html">load</a></span>(filePath_windang))</a>
<a class="sourceLine" id="cb9-31" data-line-number="31">} <span class="cf">else</span> {</a>
<a class="sourceLine" id="cb9-32" data-line-number="32">  pat_windang &lt;-<span class="st"> </span><span class="kw"><a href="../../reference/pat_createNew.html">pat_createNew</a></span>(</a>
<a class="sourceLine" id="cb9-33" data-line-number="33">    <span class="dt">label =</span> <span class="st">"Windang, Ocean Street"</span>,</a>
<a class="sourceLine" id="cb9-34" data-line-number="34">    <span class="dt">pas =</span> pas_au,</a>
<a class="sourceLine" id="cb9-35" data-line-number="35">    <span class="dt">startdate =</span> startdate,</a>
<a class="sourceLine" id="cb9-36" data-line-number="36">    <span class="dt">enddate =</span> enddate</a>
<a class="sourceLine" id="cb9-37" data-line-number="37">  )</a>
<a class="sourceLine" id="cb9-38" data-line-number="38">} </a></code></pre></div>
<p>In order to look for patterns, we can look at the PM2.5 data recorded on channel A from all the sensors. This chunk uses <strong>ggplot2</strong> to view all the data on the same axis.</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb10-1" data-line-number="1">colors &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(</a>
<a class="sourceLine" id="cb10-2" data-line-number="2">  <span class="st">"Chisholm"</span> =<span class="st"> "#1b9e77"</span>, </a>
<a class="sourceLine" id="cb10-3" data-line-number="3">  <span class="st">"Moruya"</span> =<span class="st"> "#d95f02"</span>, </a>
<a class="sourceLine" id="cb10-4" data-line-number="4">  <span class="st">"Windang"</span> =<span class="st"> "#7570b3"</span></a>
<a class="sourceLine" id="cb10-5" data-line-number="5">)</a>
<a class="sourceLine" id="cb10-6" data-line-number="6"></a>
<a class="sourceLine" id="cb10-7" data-line-number="7">gg &lt;-<span class="st"> </span><span class="kw"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span>(<span class="dt">data =</span> pat_chisholm<span class="op">$</span>data) <span class="op">+</span></a>
<a class="sourceLine" id="cb10-8" data-line-number="8"><span class="st">  </span><span class="kw"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span>(<span class="kw"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span>(<span class="dt">x =</span> pat_chisholm<span class="op">$</span>data<span class="op">$</span>datetime, </a>
<a class="sourceLine" id="cb10-9" data-line-number="9">                 <span class="dt">y =</span> pat_chisholm<span class="op">$</span>data<span class="op">$</span>pm25_A, </a>
<a class="sourceLine" id="cb10-10" data-line-number="10">                 <span class="dt">color =</span> <span class="st">"Chisholm"</span>), <span class="dt">alpha =</span> <span class="fl">0.5</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb10-11" data-line-number="11"><span class="st">  </span><span class="kw"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span>(<span class="dt">data =</span> pat_moruya<span class="op">$</span>data, </a>
<a class="sourceLine" id="cb10-12" data-line-number="12">             <span class="kw"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span>(<span class="dt">x =</span> pat_moruya<span class="op">$</span>data<span class="op">$</span>datetime, </a>
<a class="sourceLine" id="cb10-13" data-line-number="13">                 <span class="dt">y =</span> pat_moruya<span class="op">$</span>data<span class="op">$</span>pm25_A,</a>
<a class="sourceLine" id="cb10-14" data-line-number="14">                 <span class="dt">color =</span> <span class="st">"Moruya"</span>), <span class="dt">alpha =</span> <span class="fl">0.5</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb10-15" data-line-number="15"><span class="st">  </span><span class="kw"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span>(<span class="dt">data =</span> pat_windang<span class="op">$</span>data, </a>
<a class="sourceLine" id="cb10-16" data-line-number="16">             <span class="kw"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span>(<span class="dt">x =</span> pat_windang<span class="op">$</span>data<span class="op">$</span>datetime, </a>
<a class="sourceLine" id="cb10-17" data-line-number="17">                 <span class="dt">y =</span> pat_windang<span class="op">$</span>data<span class="op">$</span>pm25_A, </a>
<a class="sourceLine" id="cb10-18" data-line-number="18">                 <span class="dt">color =</span> <span class="st">"Windang"</span>), <span class="dt">alpha =</span> <span class="fl">0.5</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb10-19" data-line-number="19"><span class="st">  </span><span class="kw"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span>(<span class="dt">title =</span> <span class="st">"PM 2.5 channel A for multiple sensors"</span> ) <span class="op">+</span></a>
<a class="sourceLine" id="cb10-20" data-line-number="20"><span class="st">  </span><span class="kw"><a href="https://ggplot2.tidyverse.org/reference/labs.html">xlab</a></span>(<span class="st">"date"</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb10-21" data-line-number="21"><span class="st">  </span><span class="kw"><a href="https://ggplot2.tidyverse.org/reference/labs.html">ylab</a></span>(<span class="st">"ug/m3"</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb10-22" data-line-number="22"><span class="st">  </span><span class="kw"><a href="https://ggplot2.tidyverse.org/reference/scale_manual.html">scale_colour_manual</a></span>(<span class="dt">name=</span><span class="st">"Sensor"</span>,<span class="dt">values=</span>colors) <span class="op">+</span></a>
<a class="sourceLine" id="cb10-23" data-line-number="23"><span class="st">  </span><span class="kw"><a href="https://ggplot2.tidyverse.org/reference/theme.html">theme</a></span>(<span class="dt">legend.position=</span> <span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fl">0.9</span>, <span class="fl">0.8</span>))</a>
<a class="sourceLine" id="cb10-24" data-line-number="24"></a>
<a class="sourceLine" id="cb10-25" data-line-number="25"><span class="kw"><a href="https://rdrr.io/r/base/print.html">print</a></span>(gg)</a></code></pre></div>
<p><img src="Australia_on_fire_files/figure-html/plot_pats-1.png" width="672"></p>
<p>Values above 1000 μg/m³ may be suspect as they are above the maximum range of the PLANTOWER particle detectors used in Purple Air sensors. (See <a href="http://www.aqmd.gov/docs/default-source/aq-spec/resources-page/plantower-pms5003-manual_v2-3.pdf">PLANTOWER PMS5003 specs</a>)</p>
</div>
<div id="create-pat-objects-based-on-proximity" class="section level3">
<h3 class="hasAnchor">
<a href="#create-pat-objects-based-on-proximity" class="anchor"></a>Create <em>pat</em> objects based on proximity</h3>
<p>Let’s check a few other sensors that are closer in proximity to Chisholm to see if they are also reporting such high values.</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb11-1" data-line-number="1">filePath_bungendore &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/file.path.html">file.path</a></span>(archiveBaseDir, <span class="st">"pat_bungendore.rda"</span>)</a>
<a class="sourceLine" id="cb11-2" data-line-number="2"><span class="cf">if</span> ( <span class="kw"><a href="https://rdrr.io/r/base/files.html">file.exists</a></span>(filePath_bungendore) ) {</a>
<a class="sourceLine" id="cb11-3" data-line-number="3">  pat_bungendore &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/get.html">get</a></span>(<span class="kw"><a href="https://rdrr.io/r/base/load.html">load</a></span>(filePath_bungendore))</a>
<a class="sourceLine" id="cb11-4" data-line-number="4">} <span class="cf">else</span> {</a>
<a class="sourceLine" id="cb11-5" data-line-number="5">  pat_bungendore &lt;-<span class="st"> </span><span class="kw"><a href="../../reference/pat_createNew.html">pat_createNew</a></span>(</a>
<a class="sourceLine" id="cb11-6" data-line-number="6">    <span class="dt">label =</span> <span class="st">"Bungendore, NSW Australia"</span>, </a>
<a class="sourceLine" id="cb11-7" data-line-number="7">    <span class="dt">pas =</span> pas_au,</a>
<a class="sourceLine" id="cb11-8" data-line-number="8">    <span class="dt">startdate =</span> <span class="dv">20191229</span>, </a>
<a class="sourceLine" id="cb11-9" data-line-number="9">    <span class="dt">enddate =</span> <span class="dv">20200110</span></a>
<a class="sourceLine" id="cb11-10" data-line-number="10">  )</a>
<a class="sourceLine" id="cb11-11" data-line-number="11">  <span class="kw"><a href="https://rdrr.io/r/base/save.html">save</a></span>(pat_bungendore, <span class="dt">file =</span> filePath_bungendore)</a>
<a class="sourceLine" id="cb11-12" data-line-number="12">}</a>
<a class="sourceLine" id="cb11-13" data-line-number="13"></a>
<a class="sourceLine" id="cb11-14" data-line-number="14">filePath_downer &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/file.path.html">file.path</a></span>(archiveBaseDir, <span class="st">"pat_downer.rda"</span>)</a>
<a class="sourceLine" id="cb11-15" data-line-number="15"><span class="cf">if</span> ( <span class="kw"><a href="https://rdrr.io/r/base/files.html">file.exists</a></span>(filePath_downer) ) {</a>
<a class="sourceLine" id="cb11-16" data-line-number="16">  pat_downer &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/get.html">get</a></span>(<span class="kw"><a href="https://rdrr.io/r/base/load.html">load</a></span>(filePath_downer))</a>
<a class="sourceLine" id="cb11-17" data-line-number="17">} <span class="cf">else</span> {</a>
<a class="sourceLine" id="cb11-18" data-line-number="18">  pat_downer &lt;-<span class="st"> </span><span class="kw"><a href="../../reference/pat_createNew.html">pat_createNew</a></span>(</a>
<a class="sourceLine" id="cb11-19" data-line-number="19">    <span class="dt">label =</span> <span class="st">"Downer"</span>,</a>
<a class="sourceLine" id="cb11-20" data-line-number="20">    <span class="dt">pas =</span> pas_au,</a>
<a class="sourceLine" id="cb11-21" data-line-number="21">    <span class="dt">startdate =</span> <span class="dv">20191220</span>, </a>
<a class="sourceLine" id="cb11-22" data-line-number="22">    <span class="dt">enddate =</span> <span class="dv">20200110</span></a>
<a class="sourceLine" id="cb11-23" data-line-number="23">  )</a>
<a class="sourceLine" id="cb11-24" data-line-number="24">  <span class="kw"><a href="https://rdrr.io/r/base/save.html">save</a></span>(pat_downer, <span class="dt">file =</span> filePath_downer)</a>
<a class="sourceLine" id="cb11-25" data-line-number="25">}</a></code></pre></div>
<p>These recently installed sensors have a shorter data history but are located close to our Sydney sensors and we would expect the PM2.5 signals to be similar.</p>
<p>The next chunk uses <strong>ggplot2</strong> to plot A channel data from the “Chisholm ACT Australia” sensor in the same green color as<br>
above in addition to channel A data from the two nearest sensors.</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb12-1" data-line-number="1">colors &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"Chisholm"</span> =<span class="st"> "#1b9e77"</span>, </a>
<a class="sourceLine" id="cb12-2" data-line-number="2">            <span class="st">"Downer"</span> =<span class="st"> "#f1a340"</span>, </a>
<a class="sourceLine" id="cb12-3" data-line-number="3">            <span class="st">"Bungendore"</span> =<span class="st"> "#998ec3"</span>)</a>
<a class="sourceLine" id="cb12-4" data-line-number="4"></a>
<a class="sourceLine" id="cb12-5" data-line-number="5">gg &lt;-<span class="st"> </span><span class="kw"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span>(<span class="dt">data =</span> pat_chisholm<span class="op">$</span>data) <span class="op">+</span></a>
<a class="sourceLine" id="cb12-6" data-line-number="6"><span class="st">  </span><span class="kw"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span>(<span class="kw"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span>(<span class="dt">x =</span> pat_chisholm<span class="op">$</span>data<span class="op">$</span>datetime, </a>
<a class="sourceLine" id="cb12-7" data-line-number="7">                 <span class="dt">y =</span> pat_chisholm<span class="op">$</span>data<span class="op">$</span>pm25_A, </a>
<a class="sourceLine" id="cb12-8" data-line-number="8">                 <span class="dt">color =</span> <span class="st">"Chisholm"</span>), <span class="dt">alpha =</span> <span class="fl">0.5</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb12-9" data-line-number="9"><span class="st">  </span><span class="kw"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span>(<span class="dt">data =</span> pat_downer<span class="op">$</span>data, </a>
<a class="sourceLine" id="cb12-10" data-line-number="10">             <span class="kw"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span>(<span class="dt">x =</span> pat_downer<span class="op">$</span>data<span class="op">$</span>datetime, </a>
<a class="sourceLine" id="cb12-11" data-line-number="11">                 <span class="dt">y =</span> pat_downer<span class="op">$</span>data<span class="op">$</span>pm25_A,</a>
<a class="sourceLine" id="cb12-12" data-line-number="12">                 <span class="dt">color =</span> <span class="st">"Downer"</span>), <span class="dt">alpha =</span> <span class="fl">0.5</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb12-13" data-line-number="13"><span class="st">  </span><span class="kw"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span>(<span class="dt">data =</span> pat_bungendore<span class="op">$</span>data, </a>
<a class="sourceLine" id="cb12-14" data-line-number="14">             <span class="kw"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span>(<span class="dt">x =</span> pat_bungendore<span class="op">$</span>data<span class="op">$</span>datetime, </a>
<a class="sourceLine" id="cb12-15" data-line-number="15">                 <span class="dt">y =</span> pat_bungendore<span class="op">$</span>data<span class="op">$</span>pm25_A, </a>
<a class="sourceLine" id="cb12-16" data-line-number="16">                 <span class="dt">color =</span> <span class="st">"Bungendore"</span>), <span class="dt">alpha =</span> <span class="fl">0.5</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb12-17" data-line-number="17"><span class="st">  </span><span class="kw"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span>(<span class="dt">title =</span> <span class="st">"PM 2.5 channel A for multiple sensors"</span> ) <span class="op">+</span></a>
<a class="sourceLine" id="cb12-18" data-line-number="18"><span class="st">  </span><span class="kw"><a href="https://ggplot2.tidyverse.org/reference/labs.html">xlab</a></span>(<span class="st">"date"</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb12-19" data-line-number="19"><span class="st">  </span><span class="kw"><a href="https://ggplot2.tidyverse.org/reference/labs.html">ylab</a></span>(<span class="st">"ug/m3"</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb12-20" data-line-number="20"><span class="st">  </span><span class="kw"><a href="https://ggplot2.tidyverse.org/reference/scale_manual.html">scale_colour_manual</a></span>(<span class="dt">name =</span> <span class="st">"Sensor"</span>, <span class="dt">values =</span> colors) <span class="op">+</span></a>
<a class="sourceLine" id="cb12-21" data-line-number="21"><span class="st">  </span><span class="kw"><a href="https://ggplot2.tidyverse.org/reference/theme.html">theme</a></span>(<span class="dt">legend.position =</span> <span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fl">0.9</span>, <span class="fl">0.8</span>))</a>
<a class="sourceLine" id="cb12-22" data-line-number="22"></a>
<a class="sourceLine" id="cb12-23" data-line-number="23"><span class="kw"><a href="https://rdrr.io/r/base/print.html">print</a></span>(gg)</a></code></pre></div>
<p><img src="Australia_on_fire_files/figure-html/proximity_plot-1.png" width="672"></p>
<p>All three sensors are reporting very high values on the same days between December 30, 2019 and January 6, 2020. We can use <strong>AirSensor</strong> package “State-of-Health” functions to evaluate whether these recently installed sensors are performing properly.</p>
</div>
<div id="sensor-state-of-health" class="section level3">
<h3 class="hasAnchor">
<a href="#sensor-state-of-health" class="anchor"></a>Sensor State-of-Health</h3>
<p>After looking at sensor data from numerous sensors over long periods of time, we have noticed that the <em>pat</em> data quality can degrade over time. A quick way to quantify data quality is to simply calculate the r<sup>2</sup> value between channels A the daily data quality is categorized as good, fair, or poor. Typically, new sensors have not had time for outside factors to degrade data quality, but for a quick sanity check, we can use the <code><a href="../../reference/pat_dailySoHIndexPlot.html">pat_dailySoHIndexPlot()</a></code> function to plot the daily State-of-Health index. This function plots both channels A and B with a daily State-of-Health index along the bottom.</p>
<p>The State-of-Health index is a multi-metric index and with several components including. The <code>dailyPctReporting</code> component is most likely responsible for the brief segment of “Poor” during the first partial day in the time series.</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb13-1" data-line-number="1"><span class="kw"><a href="../../reference/pat_dailySoHIndexPlot.html">pat_dailySoHIndexPlot</a></span>(pat_chisholm)</a></code></pre></div>
<p><img src="Australia_on_fire_files/figure-html/pat_soh-1.png" width="672"></p>
<p>The sensor seems to be in good health so. It is uncler what to make of such high PM2.5 values and whether they are out-of-spec or not. In any case, the smoke in the Sydney area was clearly very bad over the time period of interest.</p>
</div>
<div id="sensor-ab-agreement" class="section level3">
<h3 class="hasAnchor">
<a href="#sensor-ab-agreement" class="anchor"></a>Sensor A/B agreement</h3>
<p>The primary component used in the State-of-Health index is the level of agreement between the A and B channel measurements. The <code><a href="../../reference/pat_internalFit.html">pat_internalFit()</a></code> function makes it easy to compare these values and calculate the R<sup>2</sup> .</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb14-1" data-line-number="1"><span class="kw"><a href="../../reference/pat_internalFit.html">pat_internalFit</a></span>(pat_chisholm)</a></code></pre></div>
<p><img src="Australia_on_fire_files/figure-html/pat_internalFit-1.png" width="672"></p>
<p>With an R<sup>2</sup> of 0.998, this sensor seems to be performing quite well indeed.</p>
</div>
</div>
<div id="working-with-airsensor-data" class="section level2">
<h2 class="hasAnchor">
<a href="#working-with-airsensor-data" class="anchor"></a>Working with <em>airsensor</em> data</h2>
<p>Another way to look at the PurpleAir sensor data is to convert the <em>pat</em> into an <em>airsensor</em> object. The following chunk aggregates data from a pat object into an <em>airsensor</em> object with an hourly time axis. This new <em>airsensor</em> object is equivalent to a <em>ws_monitor</em> object used in the <strong>PWFSLSmoke</strong> package.</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb15-1" data-line-number="1">airsensor_chisholm &lt;-<span class="st"> </span><span class="kw"><a href="../../reference/pat_createAirSensor.html">pat_createAirSensor</a></span>(pat_chisholm)</a>
<a class="sourceLine" id="cb15-2" data-line-number="2"><span class="co">#airsensor_chisholm &lt;- pat_createAirSensor(</span></a>
<a class="sourceLine" id="cb15-3" data-line-number="3"><span class="co">#  pat = pat_chisholm,</span></a>
<a class="sourceLine" id="cb15-4" data-line-number="4"><span class="co">#  period = "1 hour",</span></a>
<a class="sourceLine" id="cb15-5" data-line-number="5"><span class="co">#  parameter = "pm25",</span></a>
<a class="sourceLine" id="cb15-6" data-line-number="6"><span class="co">#  channel = "a",</span></a>
<a class="sourceLine" id="cb15-7" data-line-number="7"><span class="co">#  qc_algorithm = "hourly_AB_01",</span></a>
<a class="sourceLine" id="cb15-8" data-line-number="8"><span class="co">#  min_count = 20,</span></a>
<a class="sourceLine" id="cb15-9" data-line-number="9"><span class="co">#  aggregation_FUN = pat_aggregate</span></a>
<a class="sourceLine" id="cb15-10" data-line-number="10"><span class="co">#)</span></a></code></pre></div>
<div id="advanced-plotting" class="section level3">
<h3 class="hasAnchor">
<a href="#advanced-plotting" class="anchor"></a>Advanced plotting</h3>
<p>Now that we have converted the relative raw <em>pas</em> into an <em>airsensor</em> object, we can any of the “monitor” plotting functions found in the <strong>PWFSLSmoke</strong> or <em>AirMonitorPlots</em> packages</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb16-1" data-line-number="1">AirMonitorPlots<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/AirMonitorPlots/man/monitor_ggDailyBarplot.html">monitor_ggDailyBarplot</a></span>(airsensor_chisholm)</a></code></pre></div>
<p><img src="Australia_on_fire_files/figure-html/monitor_plots-1.png" width="672"></p>
<p>Here, the bar associated with each day is colored by Air Quality Index (AQI). Over this time period there were only 10 days where the daily average AQI was below “Unhealthy”. Yikes!</p>
<p>Unfortunately, the current QC algorithm in the package invalidates values over 1000 resulting in missing daily averages on the days with the highest measurements. (<em>This threshold is being reevaluated.</em>)</p>
</div>
<div id="incorporating-wind-data" class="section level3">
<h3 class="hasAnchor">
<a href="#incorporating-wind-data" class="anchor"></a>Incorporating wind data</h3>
<p>To get a sense of what direction smoke is coming from, we use the<br><code>sensor_PolluationRose()</code> function. As the name implies, this function takes an <em>airsensor</em> objecct as an argument. It then obtains hourly wind direction and speed data from the nearest meterological site and plots a traditional wind rose plot for wind direction and PM2.5.</p>
<p>In this case, it looks like the smoke is coming mostly from the E/NE which is validated by this wind rose plot from the Australian Bureau of Meteorology here: <a href="http://www.bom.gov.au/cgi-bin/climate/cgi_bin_scripts/windrose_selector.cgi?period=Dec&amp;type=9&amp;location=72150" class="uri">http://www.bom.gov.au/cgi-bin/climate/cgi_bin_scripts/windrose_selector.cgi?period=Dec&amp;type=9&amp;location=72150</a></p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb17-1" data-line-number="1"><span class="kw"><a href="../../reference/sensor_pollutionRose.html">sensor_pollutionRose</a></span>(<span class="dt">sensor =</span> airsensor_chisholm)</a></code></pre></div>
<p><img src="Australia_on_fire_files/figure-html/pollution_rose-1.png" width="672"></p>
<p>The <code><a href="../../reference/sensor_pollutionRose.html">sensor_pollutionRose()</a></code> function uses the <strong>metdata</strong> package to obtain wind data. We can use this package ourselves to get location information for the narest meteorological site to Chisholm so that we can map the location relative to our PurpleAir sensors.</p>
<p>The chunk below finds the meteorological site closest to Chisholm, and plots it on the map in blue along with oter sensors near Canberra.</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb18-1" data-line-number="1"><span class="co"># Target location</span></a>
<a class="sourceLine" id="cb18-2" data-line-number="2">lon &lt;-<span class="st"> </span>pat_chisholm<span class="op">$</span>meta<span class="op">$</span>longitude</a>
<a class="sourceLine" id="cb18-3" data-line-number="3">lat &lt;-<span class="st"> </span>pat_chisholm<span class="op">$</span>meta<span class="op">$</span>latitude</a>
<a class="sourceLine" id="cb18-4" data-line-number="4"></a>
<a class="sourceLine" id="cb18-5" data-line-number="5"><span class="co"># Meteorological sites</span></a>
<a class="sourceLine" id="cb18-6" data-line-number="6">closestSite &lt;-<span class="st"> </span>worldmet<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/worldmet/man/getMeta.html">getMeta</a></span>(<span class="dt">lon =</span> lon, </a>
<a class="sourceLine" id="cb18-7" data-line-number="7">                                 <span class="dt">lat =</span> lat, </a>
<a class="sourceLine" id="cb18-8" data-line-number="8">                                 <span class="dt">n =</span> <span class="dv">1</span>, </a>
<a class="sourceLine" id="cb18-9" data-line-number="9">                                 <span class="dt">plot =</span> <span class="ot">FALSE</span>)[<span class="dv">1</span>,]</a>
<a class="sourceLine" id="cb18-10" data-line-number="10"></a>
<a class="sourceLine" id="cb18-11" data-line-number="11"><span class="co"># Canberra sensors</span></a>
<a class="sourceLine" id="cb18-12" data-line-number="12">pas_canberra &lt;-<span class="st"> </span></a>
<a class="sourceLine" id="cb18-13" data-line-number="13"><span class="st">  </span>pas_au<span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb18-14" data-line-number="14"><span class="st">  </span><span class="kw"><a href="../../reference/pas_filterNear.html">pas_filterNear</a></span>(</a>
<a class="sourceLine" id="cb18-15" data-line-number="15">    <span class="dt">latitude =</span> pat_chisholm<span class="op">$</span>meta<span class="op">$</span>latitude, </a>
<a class="sourceLine" id="cb18-16" data-line-number="16">    <span class="dt">longitude =</span> pat_chisholm<span class="op">$</span>meta<span class="op">$</span>longitude, </a>
<a class="sourceLine" id="cb18-17" data-line-number="17">    <span class="dt">radius =</span> <span class="st">"40 km"</span></a>
<a class="sourceLine" id="cb18-18" data-line-number="18">  )</a>
<a class="sourceLine" id="cb18-19" data-line-number="19"></a>
<a class="sourceLine" id="cb18-20" data-line-number="20"><span class="co"># Leaflet map</span></a>
<a class="sourceLine" id="cb18-21" data-line-number="21">map &lt;-<span class="st"> </span><span class="kw"><a href="../../reference/pas_leaflet.html">pas_leaflet</a></span>(pas_canberra) </a>
<a class="sourceLine" id="cb18-22" data-line-number="22"></a>
<a class="sourceLine" id="cb18-23" data-line-number="23">map &lt;-</a>
<a class="sourceLine" id="cb18-24" data-line-number="24"><span class="st">  </span>map <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb18-25" data-line-number="25"><span class="st">  </span>leaflet<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/leaflet/man/map-layers.html">addCircleMarkers</a></span>(<span class="dt">lng =</span> closestSite<span class="op">$</span>longitude,</a>
<a class="sourceLine" id="cb18-26" data-line-number="26">                            <span class="dt">lat =</span> closestSite<span class="op">$</span>latitude)</a>
<a class="sourceLine" id="cb18-27" data-line-number="27"></a>
<a class="sourceLine" id="cb18-28" data-line-number="28">map</a></code></pre></div>
<div id="htmlwidget-2977d3e4a590cf4461d4" style="width:672px;height:480px;" class="leaflet html-widget"></div>
<script type="application/json" data-for="htmlwidget-2977d3e4a590cf4461d4">{"x":{"options":{"crs":{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,"options":{}}},"setView":[[-35.3358705,149.2843635],10,[]],"calls":[{"method":"addProviderTiles","args":["Esri.WorldTopoMap",null,null,{"errorTileUrl":"","noWrap":false,"detectRetina":false}]},{"method":"addCircleMarkers","args":[[-35.245241,-35.426909,-35.244832],[149.448004,149.120723,149.145887],10,["Bungendore, NSW Australia","Chisholm ACT Australia","Downer"],null,{"interactive":true,"className":"","stroke":false,"color":"#03F","weight":5,"opacity":0.5,"fill":true,"fillColor":["#8F3F97","#FFFF00","#FF0000"],"fillOpacity":0.8},null,null,["<b>Bungendore, NSW Australia<\/b><br/><b>deviceDeploymentID = f4f4c6d16c637bf5_45307<\/b><br/><b>pm25_1hr = 164.7 µg/m3<\/b><br/>temperature = 67 F<br/>humidity = 59%<br/>pm25_1hr = 164.7 µg/m3<br/>pm25_1day = 91.2 µg/m3<br/>location_type = outside<br/>","<b>Chisholm ACT Australia<\/b><br/><b>deviceDeploymentID = 27f2d8382be52aff_41449<\/b><br/><b>pm25_1hr = 20.9 µg/m3<\/b><br/>temperature = 66 F<br/>humidity = 37%<br/>pm25_1hr = 20.9 µg/m3<br/>pm25_1day = 78.9 µg/m3<br/>location_type = outside<br/>","<b>Downer<\/b><br/><b>deviceDeploymentID = 75662802637d6d12_42085<\/b><br/><b>pm25_1hr = 67.5 µg/m3<\/b><br/>temperature = 65 F<br/>humidity = 58%<br/>pm25_1hr = 67.5 µg/m3<br/>pm25_1day = 84.8 µg/m3<br/>location_type = outside<br/>"],null,null,{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},null]},{"method":"addLegend","args":[{"colors":["#7E0023","#8F3F97","#FF0000","#FF7E00","#FFFF00","#00E400"],"labels":["Hazardous","Very Unhealthy","Unhealthy","USG","Moderate","Good"],"na_color":null,"na_label":"NA","opacity":1,"position":"bottomright","type":"unknown","title":"AQI","extra":null,"layerId":null,"className":"info legend","group":null}]},{"method":"addCircleMarkers","args":[-35.417,149.1,10,null,null,{"interactive":true,"className":"","stroke":true,"color":"#03F","weight":5,"opacity":0.5,"fill":true,"fillColor":"#03F","fillOpacity":0.2},null,null,null,null,null,{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},null]}],"limits":{"lat":[-35.426909,-35.244832],"lng":[149.1,149.448004]}},"evals":[],"jsHooks":[]}</script><p>Hopefully, this tour of functionality gives you a sense of the capabilities of the <strong>AirSensor</strong> package and provides a template for your own investigations of air quality data.</p>
<p><em>Happy Exploring!</em></p>
<p><em>Mazama Science</em></p>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">

        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#goals">Goals</a></li>
      <li><a href="#getting-the-data">Getting the Data</a></li>
      <li><a href="#explore-the-pas-object">Explore the <em>pas</em> object</a></li>
      <li><a href="#explore-the-pat-data">Explore the <em>pat</em> data</a></li>
      <li><a href="#working-with-airsensor-data">Working with <em>airsensor</em> data</a></li>
      </ul>
</div>
      </div>

</div>



      <footer><div class="copyright">
  <p>Developed by Jonathan Callahan, Hans Martin, Kayleigh Wilson, Tate Brasel, Helen Miller.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.4.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
