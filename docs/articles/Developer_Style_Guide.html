<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Developer Style Guide • AirSensor</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/lumen/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/all.min.css" integrity="sha256-nAmazAk6vS34Xqo0BSrTb+abbtFlgsFK7NKSi6o7Y78=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/v4-shims.min.css" integrity="sha256-6qHlizsOWFskGlwVOKuns+D1nB6ssZrHQrNj1wGplHc=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/headroom.min.js" integrity="sha256-DJFC1kqIhelURkuza0AvYal5RxMtpzLjFhsnVIeuk+U=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Developer Style Guide">
<meta property="og:description" content="">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-inverse navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">AirSensor</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.9.18</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/AirSensor_Function_Overview.html">AirSensor Function Overview</a>
    </li>
    <li>
      <a href="../articles/Developer_Style_Guide.html">Developer Style Guide</a>
    </li>
    <li>
      <a href="../articles/articles/Australia_on_fire.html">Australia on Fire</a>
    </li>
    <li>
      <a href="../articles/articles/Custom_QC_Algorithms.html">Custom QC Algorithms</a>
    </li>
    <li>
      <a href="../articles/articles/DataFlowChart.html">Processing PurpleAir Data</a>
    </li>
    <li>
      <a href="../articles/articles/SoH_functions.html">SoH Functions</a>
    </li>
    <li>
      <a href="../articles/articles/Temporal_Aggregation.html">Temporally Aggregated Time Series</a>
    </li>
    <li>
      <a href="../articles/articles/outlier_detection.html">Outlier Detection with the Hampel Filter</a>
    </li>
    <li>
      <a href="../articles/articles/pas_introduction.html">PurpleAir Synoptic Data</a>
    </li>
    <li>
      <a href="../articles/articles/pat_introduction.html">PurpleAir TimeSeries Data</a>
    </li>
    <li>
      <a href="../articles/articles/purpleair_failure_modes.html">PurpleAir Failure Modes</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/MazamaScience/AirSensor">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1>Developer Style Guide</h1>
                        <h4 class="author">Mazama Science</h4>
            
            <h4 class="date">2020-04-06</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/MazamaScience/AirSensor/blob/master/vignettes/Developer_Style_Guide.Rmd"><code>vignettes/Developer_Style_Guide.Rmd</code></a></small>
      <div class="hidden name"><code>Developer_Style_Guide.Rmd</code></div>

    </div>

    
    
<div id="r-style-guide" class="section level1">
<h1 class="hasAnchor">
<a href="#r-style-guide" class="anchor"></a>R Style Guide</h1>
<p>This document describes the coding style used within the package. Having a consistent style enhances the readability and “understandability” of the code and make it easier for users and developers to work with this package and with other, related packages from <a href="http://mazamascience.com">Mazama Science</a>.</p>
<div id="naming-objects" class="section level2">
<h2 class="hasAnchor">
<a href="#naming-objects" class="anchor"></a>Naming Objects</h2>
<p>Naming variables is one of the most important things to get right to make your code readable and understandable to future readers of the code <em>(perhaps even yourself!)</em>. Having a system for creating names also makes it easier to come up with new ones.</p>
<p>Mazama Science embraces <strong><code>lowerCamelCase</code></strong> for object names.</p>
<p>With the casing settled, we use an ornithologist’s sensibility for how to identify things:</p>
<ul>
<li>What is it? — a <code>bird</code>
</li>
<li>What kind of bird is it? — a <code>blackBird</code>
</li>
<li>What kind of blackBird is it? — a <code>redwingedBlackBird</code>
</li>
</ul>
<p>It’s a simple system: start with a noun and prefix it with descriptors until it is uniquely identified.</p>
<p>In this system we would never have a variable called: <code>num_hours</code>. Instead we go through our process:</p>
<ul>
<li>What is it? — <em>(Hmmm. What noun describes this? Ah yes!)</em> — a <code>count</code>
</li>
<li>What kind of count is it? — <em>(It’s not a “head count” or a “body count”.)</em> It’s an <code>hourCount</code>.</li>
</ul>
<p>For complex objects it is often helpful to give readers of the code a hint as to what type of object it is so they will know how to work with it. We often use variable names like:</p>
<ul>
<li>
<code>patList</code> — a <code>list</code> of <code>pat</code> objects</li>
<li>
<code>SPDF</code> — a <code>SpatialPolygonsDataFrame</code>
</li>
<li>
<code>statsTbl</code> — a <code>tibble</code> of statistical results</li>
</ul>
<p>We occasionally use ‘_’ to create classes of similar variables that are otherwise hard to name, e.g.:</p>
<pre><code>SoH_sub
SoH_tbl
SoH_tidy</code></pre>
</div>
<div id="naming-functions" class="section level2">
<h2 class="hasAnchor">
<a href="#naming-functions" class="anchor"></a>Naming Functions</h2>
<p>Most functions should strive to be atomic in nature and should do one thing really well. Think of them as individual <em>Lego</em> bricks that we click together to achieve more advanced functionality. Where objects are <em><strong>well described nouns</strong></em>, functions are <em><strong>well described verbs</strong></em> that describe what they do as in:</p>
<pre><code><a href="../reference/pas_createNew.html">pas_createNew()
pas_filter()
pas_filterArea()
pas_filterNear()
pas_getColumn()
pas_getDeviceDeploymentIDs()
pas_getIDs()
...</a></code></pre>
<p>All of these functions begin with <code>pas_</code> because they are for creating or working with <code>pas</code> objects. Many of these functions accept a <code>pas</code> object as their first argument and return a modified <code>pas</code>. This means that they can be used with the “pipe” operator and chained together as in:</p>
<pre><code>Nipomo_labels &lt;-
  pas_load() %&gt;%
  pas_filterNear(
    longitude = -120.476,
    latitude = 35.043,
    radius = "10 km"
  ) %&gt;%
  pas_getLabels()</code></pre>
<p>Sometimes functions are named after the object they return. The initial <code>create</code> in these function names is understood. This is especially true with plotting functions. Examples include:</p>
<pre><code><a href="../reference/pat_dygraph.html">pat_dygraph()
pat_leaflet()
pat_multiPlot()
pat_scatterPlotMatrix()</a></code></pre>
</div>
<div id="naming-files" class="section level2">
<h2 class="hasAnchor">
<a href="#naming-files" class="anchor"></a>Naming Files</h2>
<p>Each file should contain a single function of the same name. Thus, the function named <code>createAPIList()</code> is defined in <code>createAPIList.R</code>. An exception is made for small, mostly internal functions used in conjuction with a particular type of object or activity. These can be stored together in a file named <code>utils-~</code>:</p>
<pre><code>utils-outliers.R
utils-paSynoptic.R
utils-paTimeseries.R
utils-pipe.R
utils-plot.R
utils-sampling.R
utils-sensor.R</code></pre>
</div>
<div id="syntax" class="section level2">
<h2 class="hasAnchor">
<a href="#syntax" class="anchor"></a>Syntax</h2>
<p>We generally adhere to the <a href="http://adv-r.had.co.nz/Style.html">Wickham Style Guide</a> for syntax with a few exceptions:</p>
<div id="spacing" class="section level3">
<h3 class="hasAnchor">
<a href="#spacing" class="anchor"></a>Spacing</h3>
<p><strong>Do</strong> place spaces around code in parentheses if it is an <code>if</code> test:</p>
<pre><code>if ( &lt;logical expression part1&gt; &amp;&amp; &lt;logical expression part2&gt; ) {
  ...
}</code></pre>
<p>When debugging, this makes it much easier to select the logical test with a cursor and paste it into the RStudio console.</p>
</div>
<div id="lists" class="section level3">
<h3 class="hasAnchor">
<a href="#lists" class="anchor"></a>Lists</h3>
<p>We generally like to specify R lists with each <code>parameter = value</code> pair on a separate line. This goes for regular lists and for named argument lists passed to a function:</p>
<pre><code>diamond_bar &lt;-
  pas_load() %&gt;%
  pas_filterNear(
    longitude = -117.820833,
    latitude = 34.001667, 
    radius = "20 km"
  )</code></pre>
<p>Coding this way makes it easy to see which function arguments are being passed. It also eases future refactoring of the code when additional arguments need to be added or the order of arguments need to be changed.</p>
<hr>
<p>It is our belief that good code should be both readable and understandable and should inspire others to copy and innovate on their own.</p>
<p><strong><em>Mazama Science</em></strong></p>
</div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">

        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li>
<a href="#r-style-guide">R Style Guide</a><ul class="nav nav-pills nav-stacked">
<li><a href="#naming-objects">Naming Objects</a></li>
      <li><a href="#naming-functions">Naming Functions</a></li>
      <li><a href="#naming-files">Naming Files</a></li>
      <li><a href="#syntax">Syntax</a></li>
      </ul>
</li>
      </ul>
</div>
      </div>

</div>



      <footer><div class="copyright">
  <p>Developed by Jonathan Callahan, Hans Martin, Kayleigh Wilson, Tate Brasel, Helen Miller.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.4.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
