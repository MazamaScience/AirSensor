<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Combine PurpleAir raw dataframes — pat_createPATimeseriesObject • AirSensor</title>

<!-- favicons -->
<link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png" />
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png" />
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png" />
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png" />

<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/lumen/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous" />


<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Combine PurpleAir raw dataframes — pat_createPATimeseriesObject" />
<meta property="og:description" content="The pat_downloadParseRawData() function returns four
dataframes of data from ThingSpeak. These must be combined into the single
data dataframe found in a 'pat' object. This process involves selecting
data columns to use and bringing all data onto a unified time axis.
Two sets of data values exist in the raw data, one for each of two algorithms
that convert particle counts into aerosol density.
PurpleAir has the following description:

The CF_ATM and CF_1 values are calculated from the particle count data with a 
proprietary algorithm developed by the PMS5003 laser counter manufacturer, 
PlanTower. The specifics of the calculation are not available to the public 
(or us for that matter). However, to convert the particle count data (um/dl) 
to a mass concentration (ug/m3) they must use an average particle density. 
They do provide 2 different mass concentration conversion options; CF_1 uses 
the &quot;average particle density&quot; for indoor particulate matter and CF_ATM uses 
the &quot;average particle density&quot; for outdoor particulate matter.

The AirSensor package and all associated archive data use PlanTower
algorithm CF_ATM." />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-inverse navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">AirSensor</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.0.9</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/AirSensor_Function_Overview.html">AirSensor Function Overview</a>
    </li>
    <li>
      <a href="../articles/Developer_Style_Guide.html">Developer Style Guide</a>
    </li>
    <li>
      <a href="../articles/articles/Australia_on_fire.html">Australia on Fire</a>
    </li>
    <li>
      <a href="../articles/articles/Custom_QC_Algorithms.html">Custom QC Algorithms</a>
    </li>
    <li>
      <a href="../articles/articles/DataFlowChart.html">Processing PurpleAir Data</a>
    </li>
    <li>
      <a href="../articles/articles/MVCAA_Tutorial_1.html">MVCAA Tutorial 1: Creating PAT Data</a>
    </li>
    <li>
      <a href="../articles/articles/MVCAA_Tutorial_1_Astrid_edits.html">MVCAA Tutorial 1: Creating PAT Data</a>
    </li>
    <li>
      <a href="../articles/articles/MVCAA_Tutorial_2.html">MVCAA Tutorial 2: Exploring PAT Data</a>
    </li>
    <li>
      <a href="../articles/articles/MVCAA_Tutorial_3.html">MVCAA Tutorial 3: Creating Airsensor Data</a>
    </li>
    <li>
      <a href="../articles/articles/MVCAA_Tutorial_4.html">MVCAA Tutorial 4: Exploring Airsensor Data</a>
    </li>
    <li>
      <a href="../articles/articles/MVCAA_Tutorial_5.html">MVCAA Tutorial 5: Building a Local Archive</a>
    </li>
    <li>
      <a href="../articles/articles/MVCAA_Tutorial_6.html">MVCAA Tutorial 6: Methow Vallely Smoke</a>
    </li>
    <li>
      <a href="../articles/articles/SoH_functions.html">SoH Functions</a>
    </li>
    <li>
      <a href="../articles/articles/Temporal_Aggregation.html">Temporally Aggregated Time Series</a>
    </li>
    <li>
      <a href="../articles/articles/outlier_detection.html">Outlier Detection with the Hampel Filter</a>
    </li>
    <li>
      <a href="../articles/articles/pas_introduction.html">PurpleAir Synoptic Data</a>
    </li>
    <li>
      <a href="../articles/articles/pat_introduction.html">PurpleAir Time Series Data</a>
    </li>
    <li>
      <a href="../articles/articles/purpleair_failure_modes.html">PurpleAir Failure Modes</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/MazamaScience/AirSensor/">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Combine PurpleAir raw dataframes</h1>
    <small class="dont-index">Source: <a href='https://github.com/MazamaScience/AirSensor/blob/master/R/pat_createPATimeseriesObject.R'><code>R/pat_createPATimeseriesObject.R</code></a></small>
    <div class="hidden name"><code>pat_createPATimeseriesObject.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>The <code><a href='pat_downloadParseRawData.html'>pat_downloadParseRawData()</a></code> function returns four
dataframes of data from ThingSpeak. These must be combined into the single
<code>data</code> dataframe found in a 'pat' object. This process involves selecting
data columns to use and bringing all data onto a unified time axis.</p>
<p>Two sets of data values exist in the raw data, one for each of two algorithms
that convert particle counts into aerosol density.</p>
<p>PurpleAir has the following description:</p>
<p><em>
The CF_ATM and CF_1 values are calculated from the particle count data with a 
proprietary algorithm developed by the PMS5003 laser counter manufacturer, 
PlanTower. The specifics of the calculation are not available to the public 
(or us for that matter). However, to convert the particle count data (um/dl) 
to a mass concentration (ug/m3) they must use an average particle density. 
They do provide 2 different mass concentration conversion options; CF_1 uses 
the "average particle density" for indoor particulate matter and CF_ATM uses 
the "average particle density" for outdoor particulate matter.
</em></p>
<p>The <span class="pkg">AirSensor</span> package and all associated archive data use PlanTower
algorithm <code>CF_ATM</code>.</p>
    </div>

    <pre class="usage"><span class='fu'>pat_createPATimeseriesObject</span><span class='op'>(</span>pat_rawList <span class='op'>=</span> <span class='cn'>NULL</span><span class='op'>)</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>pat_rawList</th>
      <td><p>List of dataframes as returned by <code><a href='pat_downloadParseRawData.html'>pat_downloadParseRawData()</a></code>.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>A PurpleAir Timeseries <em>pat</em> object.</p>
    <h2 class="hasAnchor" id="references"><a class="anchor" href="#references"></a>References</h2>

    <p><a href='https://www2.purpleair.com/community/faq#!hc-what-is-the-difference-between-cf-1-and-cf-atm'>https://www2.purpleair.com/community/faq#!hc-what-is-the-difference-between-cf-1-and-cf-atm</a></p>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='co'># \donttest{</span>
<span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='https://github.com/MazamaScience/AirSensor'>AirSensor</a></span><span class='op'>)</span>

<span class='fu'><a href='setArchiveBaseUrl.html'>setArchiveBaseUrl</a></span><span class='op'>(</span><span class='st'>"http://data.mazamascience.com/PurpleAir/v1"</span><span class='op'>)</span>

<span class='va'>pas</span> <span class='op'>&lt;-</span> <span class='fu'><a href='pas_load.html'>pas_load</a></span><span class='op'>(</span><span class='op'>)</span>

<span class='va'>pat_rawList</span> <span class='op'>&lt;-</span> <span class='fu'><a href='pat_downloadParseRawData.html'>pat_downloadParseRawData</a></span><span class='op'>(</span>
  id <span class='op'>=</span> <span class='st'>"78df3c292c8448f7_21257"</span>,
  pas <span class='op'>=</span> <span class='va'>pas</span>
<span class='op'>)</span>

<span class='va'>pat</span> <span class='op'>&lt;-</span> <span class='fu'>pat_createPATimeseriesObject</span><span class='op'>(</span><span class='va'>pat_rawList</span><span class='op'>)</span>

<span class='fu'><a href='pat_multiPlot.html'>pat_multiPlot</a></span><span class='op'>(</span><span class='va'>pat</span><span class='op'>)</span>
</div><div class='output co'>#&gt; <span class='warning'>Warning: Removed 1296 rows containing missing values (geom_point).</span></div><div class='output co'>#&gt; <span class='warning'>Warning: Removed 1296 rows containing missing values (geom_point).</span></div><div class='output co'>#&gt; <span class='warning'>Warning: Removed 1296 rows containing missing values (geom_point).</span></div><div class='output co'>#&gt; <span class='warning'>Warning: Removed 1296 rows containing missing values (geom_point).</span></div><div class='img'><img src='pat_createPATimeseriesObject-1.png' alt='' width='700' height='433' /></div><div class='input'><span class='co'># }</span>
</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Jonathan Callahan, Hans Martin, Kayleigh Wilson, Tate Brasel, Helen Miller.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


